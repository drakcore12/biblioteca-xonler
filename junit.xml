<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="1021" failures="0" errors="0" time="50.692">
  <testsuite name="usuarios.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:15" time="15.996" tests="7">
    <testcase classname="usuarios.routes debe tener ruta GET / configurada" name="usuarios.routes debe tener ruta GET / configurada" time="0.049">
    </testcase>
    <testcase classname="usuarios.routes debe tener ruta GET /me configurada" name="usuarios.routes debe tener ruta GET /me configurada" time="0">
    </testcase>
    <testcase classname="usuarios.routes debe tener ruta PUT /me configurada" name="usuarios.routes debe tener ruta PUT /me configurada" time="0">
    </testcase>
    <testcase classname="usuarios.routes debe tener ruta GET /:id configurada" name="usuarios.routes debe tener ruta GET /:id configurada" time="0.001">
    </testcase>
    <testcase classname="usuarios.routes debe tener ruta POST / configurada" name="usuarios.routes debe tener ruta POST / configurada" time="0.001">
    </testcase>
    <testcase classname="usuarios.routes debe tener ruta PUT /:id configurada" name="usuarios.routes debe tener ruta PUT /:id configurada" time="0">
    </testcase>
    <testcase classname="usuarios.routes debe tener ruta DELETE /:id configurada" name="usuarios.routes debe tener ruta DELETE /:id configurada" time="0">
    </testcase>
  </testsuite>
  <testsuite name="preferencias-helpers - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:15" time="16.047" tests="4">
    <testcase classname="preferencias-helpers - cobertura completa validatePreferences - casos edge debe validar todos los campos opcionales" name="preferencias-helpers - cobertura completa validatePreferences - casos edge debe validar todos los campos opcionales" time="0.021">
    </testcase>
    <testcase classname="preferencias-helpers - cobertura completa validatePreferences - casos edge debe retornar error para valores inválidos" name="preferencias-helpers - cobertura completa validatePreferences - casos edge debe retornar error para valores inválidos" time="0.002">
    </testcase>
    <testcase classname="preferencias-helpers - cobertura completa upsertPreferences - casos edge debe usar nullish coalescing para booleanos correctamente" name="preferencias-helpers - cobertura completa upsertPreferences - casos edge debe usar nullish coalescing para booleanos correctamente" time="0.006">
    </testcase>
    <testcase classname="preferencias-helpers - cobertura completa upsertPreferences - casos edge debe actualizar preferencias existentes con valores parciales" name="preferencias-helpers - cobertura completa upsertPreferences - casos edge debe actualizar preferencias existentes con valores parciales" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="index.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:15" time="16.666" tests="5">
    <testcase classname="index.routes GET /api/health debe retornar estado de salud" name="index.routes GET /api/health debe retornar estado de salud" time="0.158">
    </testcase>
    <testcase classname="index.routes GET /api/ debe retornar información de la API" name="index.routes GET /api/ debe retornar información de la API" time="0.017">
    </testcase>
    <testcase classname="index.routes Rutas registradas debe tener ruta /api/auth" name="index.routes Rutas registradas debe tener ruta /api/auth" time="0.002">
    </testcase>
    <testcase classname="index.routes Rutas registradas debe tener ruta /api/usuarios" name="index.routes Rutas registradas debe tener ruta /api/usuarios" time="0.006">
    </testcase>
    <testcase classname="index.routes Rutas registradas debe tener ruta /api/libros" name="index.routes Rutas registradas debe tener ruta /api/libros" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="auth.controller - refresh y logout" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:15" time="16.641" tests="6">
    <testcase classname="auth.controller - refresh y logout refresh - casos edge debe retornar 401 si no hay token" name="auth.controller - refresh y logout refresh - casos edge debe retornar 401 si no hay token" time="0.05">
    </testcase>
    <testcase classname="auth.controller - refresh y logout refresh - casos edge debe usar token de cookie si está disponible" name="auth.controller - refresh y logout refresh - casos edge debe usar token de cookie si está disponible" time="0.002">
    </testcase>
    <testcase classname="auth.controller - refresh y logout refresh - casos edge debe usar token de header si no hay cookie" name="auth.controller - refresh y logout refresh - casos edge debe usar token de header si no hay cookie" time="0.002">
    </testcase>
    <testcase classname="auth.controller - refresh y logout refresh - casos edge debe retornar 401 si el token es inválido" name="auth.controller - refresh y logout refresh - casos edge debe retornar 401 si el token es inválido" time="0.001">
    </testcase>
    <testcase classname="auth.controller - refresh y logout refresh - casos edge debe retornar 404 si el usuario no existe" name="auth.controller - refresh y logout refresh - casos edge debe retornar 404 si el usuario no existe" time="0.006">
    </testcase>
    <testcase classname="auth.controller - refresh y logout logout - casos edge debe limpiar cookies de autenticación" name="auth.controller - refresh y logout logout - casos edge debe limpiar cookies de autenticación" time="0.023">
    </testcase>
  </testsuite>
  <testsuite name="register-base-middleware" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:15" time="17.301" tests="1">
    <testcase classname="register-base-middleware registerBaseMiddleware debe registrar middleware base" name="register-base-middleware registerBaseMiddleware debe registrar middleware base" time="0.029">
    </testcase>
  </testsuite>
  <testsuite name="auth.controller - password recovery" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:15" time="16.226" tests="12">
    <testcase classname="auth.controller - password recovery forgotPassword - casos edge debe retornar mensaje genérico si el email no existe" name="auth.controller - password recovery forgotPassword - casos edge debe retornar mensaje genérico si el email no existe" time="0.025">
    </testcase>
    <testcase classname="auth.controller - password recovery forgotPassword - casos edge debe retornar token en desarrollo" name="auth.controller - password recovery forgotPassword - casos edge debe retornar token en desarrollo" time="0.003">
    </testcase>
    <testcase classname="auth.controller - password recovery forgotPassword - casos edge debe retornar mensaje genérico en producción" name="auth.controller - password recovery forgotPassword - casos edge debe retornar mensaje genérico en producción" time="0.003">
    </testcase>
    <testcase classname="auth.controller - password recovery verifyResetToken - casos edge debe retornar error si el token no tiene type correcto" name="auth.controller - password recovery verifyResetToken - casos edge debe retornar error si el token no tiene type correcto" time="0.002">
    </testcase>
    <testcase classname="auth.controller - password recovery verifyResetToken - casos edge debe retornar error si el token no existe en BD" name="auth.controller - password recovery verifyResetToken - casos edge debe retornar error si el token no existe en BD" time="0.006">
    </testcase>
    <testcase classname="auth.controller - password recovery verifyResetToken - casos edge debe retornar error si el token expiró" name="auth.controller - password recovery verifyResetToken - casos edge debe retornar error si el token expiró" time="0.016">
    </testcase>
    <testcase classname="auth.controller - password recovery verifyResetToken - casos edge debe retornar error si el token ya fue usado" name="auth.controller - password recovery verifyResetToken - casos edge debe retornar error si el token ya fue usado" time="0.003">
    </testcase>
    <testcase classname="auth.controller - password recovery verifyResetToken - casos edge debe manejar JsonWebTokenError" name="auth.controller - password recovery verifyResetToken - casos edge debe manejar JsonWebTokenError" time="0.003">
    </testcase>
    <testcase classname="auth.controller - password recovery verifyResetToken - casos edge debe manejar TokenExpiredError" name="auth.controller - password recovery verifyResetToken - casos edge debe manejar TokenExpiredError" time="0.002">
    </testcase>
    <testcase classname="auth.controller - password recovery resetPassword - casos edge debe retornar error si la contraseña es muy corta" name="auth.controller - password recovery resetPassword - casos edge debe retornar error si la contraseña es muy corta" time="0.002">
    </testcase>
    <testcase classname="auth.controller - password recovery resetPassword - casos edge debe actualizar contraseña y marcar token como usado" name="auth.controller - password recovery resetPassword - casos edge debe actualizar contraseña y marcar token como usado" time="0.003">
    </testcase>
    <testcase classname="auth.controller - password recovery resetPassword - casos edge debe usar BCRYPT_ROUNDS de env si está configurado" name="auth.controller - password recovery resetPassword - casos edge debe usar BCRYPT_ROUNDS de env si está configurado" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="biblioteca-libros.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:32" time="0.756" tests="5">
    <testcase classname="biblioteca-libros.routes debe tener ruta GET / configurada" name="biblioteca-libros.routes debe tener ruta GET / configurada" time="0.002">
    </testcase>
    <testcase classname="biblioteca-libros.routes debe tener ruta GET /:id configurada" name="biblioteca-libros.routes debe tener ruta GET /:id configurada" time="0.001">
    </testcase>
    <testcase classname="biblioteca-libros.routes debe tener ruta POST / configurada" name="biblioteca-libros.routes debe tener ruta POST / configurada" time="0">
    </testcase>
    <testcase classname="biblioteca-libros.routes debe tener ruta DELETE /:id configurada" name="biblioteca-libros.routes debe tener ruta DELETE /:id configurada" time="0.001">
    </testcase>
    <testcase classname="biblioteca-libros.routes debe tener ruta GET /:id/disponibilidad configurada" name="biblioteca-libros.routes debe tener ruta GET /:id/disponibilidad configurada" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="register-routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:15" time="18.278" tests="1">
    <testcase classname="register-routes registerRoutes debe registrar rutas" name="register-routes registerRoutes debe registrar rutas" time="0.058">
    </testcase>
  </testsuite>
  <testsuite name="supadmin.controller - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:31" time="1.359" tests="8">
    <testcase classname="supadmin.controller - casos adicionales obtenerLogs - casos edge debe procesar logs de tipo application" name="supadmin.controller - casos adicionales obtenerLogs - casos edge debe procesar logs de tipo application" time="0.023">
    </testcase>
    <testcase classname="supadmin.controller - casos adicionales obtenerLogs - casos edge debe procesar logs de tipo security" name="supadmin.controller - casos adicionales obtenerLogs - casos edge debe procesar logs de tipo security" time="0.002">
    </testcase>
    <testcase classname="supadmin.controller - casos adicionales obtenerLogs - casos edge debe procesar logs de tipo audit" name="supadmin.controller - casos adicionales obtenerLogs - casos edge debe procesar logs de tipo audit" time="0.002">
    </testcase>
    <testcase classname="supadmin.controller - casos adicionales obtenerLogs - casos edge debe procesar logs de tipo error" name="supadmin.controller - casos adicionales obtenerLogs - casos edge debe procesar logs de tipo error" time="0.002">
    </testcase>
    <testcase classname="supadmin.controller - casos adicionales obtenerLogs - casos edge debe filtrar por nivel" name="supadmin.controller - casos adicionales obtenerLogs - casos edge debe filtrar por nivel" time="0.001">
    </testcase>
    <testcase classname="supadmin.controller - casos adicionales obtenerLogs - casos edge debe filtrar por fecha_desde" name="supadmin.controller - casos adicionales obtenerLogs - casos edge debe filtrar por fecha_desde" time="0.002">
    </testcase>
    <testcase classname="supadmin.controller - casos adicionales obtenerLogs - casos edge debe filtrar por fecha_hasta" name="supadmin.controller - casos adicionales obtenerLogs - casos edge debe filtrar por fecha_hasta" time="0.001">
    </testcase>
    <testcase classname="supadmin.controller - casos adicionales obtenerLogs - casos edge debe aplicar paginación" name="supadmin.controller - casos adicionales obtenerLogs - casos edge debe aplicar paginación" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="metrics.js - test directo" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:32" time="1.832" tests="2">
    <testcase classname="metrics.js - test directo debe tener ruta GET /metrics" name="metrics.js - test directo debe tener ruta GET /metrics" time="0.111">
    </testcase>
    <testcase classname="metrics.js - test directo debe manejar errores en /metrics" name="metrics.js - test directo debe manejar errores en /metrics" time="0.041">
    </testcase>
  </testsuite>
  <testsuite name="usuarios.routes - rutas inline" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:33" time="0.412" tests="3">
    <testcase classname="usuarios.routes - rutas inline GET /test debe tener ruta configurada" name="usuarios.routes - rutas inline GET /test debe tener ruta configurada" time="0.004">
    </testcase>
    <testcase classname="usuarios.routes - rutas inline GET /check/:id debe tener ruta configurada" name="usuarios.routes - rutas inline GET /check/:id debe tener ruta configurada" time="0.002">
    </testcase>
    <testcase classname="usuarios.routes - rutas inline DELETE /test-delete/:id debe tener ruta configurada" name="usuarios.routes - rutas inline DELETE /test-delete/:id debe tener ruta configurada" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="auth.controller - me" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:33" time="0.558" tests="4">
    <testcase classname="auth.controller - me me - casos edge debe retornar usuario si existe" name="auth.controller - me me - casos edge debe retornar usuario si existe" time="0.005">
    </testcase>
    <testcase classname="auth.controller - me me - casos edge debe retornar 404 si el usuario no existe" name="auth.controller - me me - casos edge debe retornar 404 si el usuario no existe" time="0.002">
    </testcase>
    <testcase classname="auth.controller - me me - casos edge debe retornar 500 si hay error en la base de datos" name="auth.controller - me me - casos edge debe retornar 500 si hay error en la base de datos" time="0.003">
    </testcase>
    <testcase classname="auth.controller - me me - casos edge debe retornar 500 si req.user no existe" name="auth.controller - me me - casos edge debe retornar 500 si req.user no existe" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="supadmin.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:33" time="1.181" tests="3">
    <testcase classname="supadmin.routes debe tener ruta GET /estadisticas configurada" name="supadmin.routes debe tener ruta GET /estadisticas configurada" time="0.003">
    </testcase>
    <testcase classname="supadmin.routes debe tener ruta GET /actividad configurada" name="supadmin.routes debe tener ruta GET /actividad configurada" time="0.001">
    </testcase>
    <testcase classname="supadmin.routes debe tener ruta GET /logs configurada" name="supadmin.routes debe tener ruta GET /logs configurada" time="0">
    </testcase>
  </testsuite>
  <testsuite name="database.js - test directo" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:34" time="0.24" tests="4">
    <testcase classname="database.js - test directo debe crear pool y exportar funciones" name="database.js - test directo debe crear pool y exportar funciones" time="0.025">
    </testcase>
    <testcase classname="database.js - test directo debe probar conexión exitosamente" name="database.js - test directo debe probar conexión exitosamente" time="0.002">
    </testcase>
    <testcase classname="database.js - test directo debe manejar error en testConnection" name="database.js - test directo debe manejar error en testConnection" time="0.001">
    </testcase>
    <testcase classname="database.js - test directo debe cerrar pool correctamente" name="database.js - test directo debe cerrar pool correctamente" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="security-monitoring - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:33" time="0.793" tests="7">
    <testcase classname="security-monitoring - cobertura completa monitorAuthAttempts - casos edge debe limpiar intentos antiguos" name="security-monitoring - cobertura completa monitorAuthAttempts - casos edge debe limpiar intentos antiguos" time="0.003">
    </testcase>
    <testcase classname="security-monitoring - cobertura completa monitorAuthAttempts - casos edge debe registrar intento fallido en respuesta 401" name="security-monitoring - cobertura completa monitorAuthAttempts - casos edge debe registrar intento fallido en respuesta 401" time="0.012">
    </testcase>
    <testcase classname="security-monitoring - cobertura completa monitorAuthAttempts - casos edge debe bloquear IP después de maxAttempts" name="security-monitoring - cobertura completa monitorAuthAttempts - casos edge debe bloquear IP después de maxAttempts" time="0.035">
    </testcase>
    <testcase classname="security-monitoring - cobertura completa monitorSuspiciousActivity - casos edge debe detectar múltiples patrones" name="security-monitoring - cobertura completa monitorSuspiciousActivity - casos edge debe detectar múltiples patrones" time="0.002">
    </testcase>
    <testcase classname="security-monitoring - cobertura completa monitorSuspiciousActivity - casos edge debe detectar headers sospechosos" name="security-monitoring - cobertura completa monitorSuspiciousActivity - casos edge debe detectar headers sospechosos" time="0.001">
    </testcase>
    <testcase classname="security-monitoring - cobertura completa monitorDataChanges - casos edge debe registrar cambios en endpoints sensibles" name="security-monitoring - cobertura completa monitorDataChanges - casos edge debe registrar cambios en endpoints sensibles" time="0.006">
    </testcase>
    <testcase classname="security-monitoring - cobertura completa monitorDataChanges - casos edge no debe registrar si no es endpoint sensible" name="security-monitoring - cobertura completa monitorDataChanges - casos edge no debe registrar si no es endpoint sensible" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="auth.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:34" time="0.497" tests="8">
    <testcase classname="auth.routes debe tener ruta POST /register configurada" name="auth.routes debe tener ruta POST /register configurada" time="0.012">
    </testcase>
    <testcase classname="auth.routes debe tener ruta POST /login configurada" name="auth.routes debe tener ruta POST /login configurada" time="0.002">
    </testcase>
    <testcase classname="auth.routes debe tener ruta GET /me configurada" name="auth.routes debe tener ruta GET /me configurada" time="0.003">
    </testcase>
    <testcase classname="auth.routes debe tener ruta POST /refresh configurada" name="auth.routes debe tener ruta POST /refresh configurada" time="0.002">
    </testcase>
    <testcase classname="auth.routes debe tener ruta POST /logout configurada" name="auth.routes debe tener ruta POST /logout configurada" time="0.003">
    </testcase>
    <testcase classname="auth.routes debe tener ruta POST /forgot-password configurada" name="auth.routes debe tener ruta POST /forgot-password configurada" time="0.002">
    </testcase>
    <testcase classname="auth.routes debe tener ruta POST /verify-reset-token configurada" name="auth.routes debe tener ruta POST /verify-reset-token configurada" time="0.009">
    </testcase>
    <testcase classname="auth.routes debe tener ruta POST /reset-password configurada" name="auth.routes debe tener ruta POST /reset-password configurada" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="auth.controller - funciones adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:33" time="1.146" tests="16">
    <testcase classname="auth.controller - funciones adicionales forgotPassword debe generar token de reset si el usuario existe" name="auth.controller - funciones adicionales forgotPassword debe generar token de reset si el usuario existe" time="0.004">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales forgotPassword debe retornar 400 si falta el email" name="auth.controller - funciones adicionales forgotPassword debe retornar 400 si falta el email" time="0.013">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales forgotPassword debe retornar mensaje genérico si el usuario no existe" name="auth.controller - funciones adicionales forgotPassword debe retornar mensaje genérico si el usuario no existe" time="0.004">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales forgotPassword debe manejar errores" name="auth.controller - funciones adicionales forgotPassword debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales verifyResetToken debe verificar token válido" name="auth.controller - funciones adicionales verifyResetToken debe verificar token válido" time="0.002">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si falta el token" name="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si falta el token" time="0.002">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si el token es inválido" name="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si el token es inválido" time="0.008">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si el token no existe en DB" name="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si el token no existe en DB" time="0.001">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si el token expiró" name="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si el token expiró" time="0.001">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si el token ya fue usado" name="auth.controller - funciones adicionales verifyResetToken debe retornar 400 si el token ya fue usado" time="0.001">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales verifyResetToken debe manejar errores de JWT" name="auth.controller - funciones adicionales verifyResetToken debe manejar errores de JWT" time="0.001">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales resetPassword debe restablecer contraseña exitosamente" name="auth.controller - funciones adicionales resetPassword debe restablecer contraseña exitosamente" time="0.002">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales resetPassword debe retornar 400 si faltan datos" name="auth.controller - funciones adicionales resetPassword debe retornar 400 si faltan datos" time="0.001">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales resetPassword debe retornar 400 si la contraseña es muy corta" name="auth.controller - funciones adicionales resetPassword debe retornar 400 si la contraseña es muy corta" time="0.005">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales resetPassword debe retornar 400 si el token es inválido" name="auth.controller - funciones adicionales resetPassword debe retornar 400 si el token es inválido" time="0.002">
    </testcase>
    <testcase classname="auth.controller - funciones adicionales resetPassword debe manejar errores" name="auth.controller - funciones adicionales resetPassword debe manejar errores" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="bibliotecas.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:34" time="0.507" tests="6">
    <testcase classname="bibliotecas.routes debe tener ruta GET / configurada" name="bibliotecas.routes debe tener ruta GET / configurada" time="0.002">
    </testcase>
    <testcase classname="bibliotecas.routes debe tener ruta GET /:id configurada" name="bibliotecas.routes debe tener ruta GET /:id configurada" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.routes debe tener ruta GET /:id/libros configurada" name="bibliotecas.routes debe tener ruta GET /:id/libros configurada" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.routes debe tener ruta POST / configurada" name="bibliotecas.routes debe tener ruta POST / configurada" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.routes debe tener ruta PUT /:id configurada" name="bibliotecas.routes debe tener ruta PUT /:id configurada" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.routes debe tener ruta DELETE /:id configurada" name="bibliotecas.routes debe tener ruta DELETE /:id configurada" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="colegios.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:34" time="0.625" tests="5">
    <testcase classname="colegios.routes debe tener ruta GET / configurada" name="colegios.routes debe tener ruta GET / configurada" time="0.002">
    </testcase>
    <testcase classname="colegios.routes debe tener ruta GET /:id configurada" name="colegios.routes debe tener ruta GET /:id configurada" time="0">
    </testcase>
    <testcase classname="colegios.routes debe tener ruta POST / configurada" name="colegios.routes debe tener ruta POST / configurada" time="0">
    </testcase>
    <testcase classname="colegios.routes debe tener ruta PUT /:id configurada" name="colegios.routes debe tener ruta PUT /:id configurada" time="0.001">
    </testcase>
    <testcase classname="colegios.routes debe tener ruta DELETE /:id configurada" name="colegios.routes debe tener ruta DELETE /:id configurada" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="auth.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:34" time="0.527" tests="15">
    <testcase classname="auth.controller register debe retornar error 400 si faltan campos obligatorios" name="auth.controller register debe retornar error 400 si faltan campos obligatorios" time="0.003">
    </testcase>
    <testcase classname="auth.controller register debe retornar error 409 si el email ya existe" name="auth.controller register debe retornar error 409 si el email ya existe" time="0.004">
    </testcase>
    <testcase classname="auth.controller register debe registrar un usuario exitosamente" name="auth.controller register debe registrar un usuario exitosamente" time="0.009">
    </testcase>
    <testcase classname="auth.controller register debe manejar errores internos" name="auth.controller register debe manejar errores internos" time="0.002">
    </testcase>
    <testcase classname="auth.controller login debe retornar error 400 si faltan email o password" name="auth.controller login debe retornar error 400 si faltan email o password" time="0.003">
    </testcase>
    <testcase classname="auth.controller login debe retornar error 401 si el usuario no existe" name="auth.controller login debe retornar error 401 si el usuario no existe" time="0.001">
    </testcase>
    <testcase classname="auth.controller login debe retornar error 401 si la contraseña es incorrecta" name="auth.controller login debe retornar error 401 si la contraseña es incorrecta" time="0.002">
    </testcase>
    <testcase classname="auth.controller login debe hacer login exitoso sin 2FA" name="auth.controller login debe hacer login exitoso sin 2FA" time="0.002">
    </testcase>
    <testcase classname="auth.controller login debe requerir 2FA si está habilitado" name="auth.controller login debe requerir 2FA si está habilitado" time="0.003">
    </testcase>
    <testcase classname="auth.controller login debe manejar errores internos" name="auth.controller login debe manejar errores internos" time="0.004">
    </testcase>
    <testcase classname="auth.controller me debe retornar información del usuario autenticado" name="auth.controller me debe retornar información del usuario autenticado" time="0.003">
    </testcase>
    <testcase classname="auth.controller me debe manejar errores internos" name="auth.controller me debe manejar errores internos" time="0.001">
    </testcase>
    <testcase classname="auth.controller refresh debe refrescar el token si es válido" name="auth.controller refresh debe refrescar el token si es válido" time="0.001">
    </testcase>
    <testcase classname="auth.controller refresh debe retornar error 404 si el usuario no existe" name="auth.controller refresh debe retornar error 404 si el usuario no existe" time="0.003">
    </testcase>
    <testcase classname="auth.controller logout debe limpiar las cookies y retornar éxito" name="auth.controller logout debe limpiar las cookies y retornar éxito" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="prestamos.routes - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:35" time="0.232" tests="3">
    <testcase classname="prestamos.routes - cobertura completa GET /test debe retornar mensaje de test" name="prestamos.routes - cobertura completa GET /test debe retornar mensaje de test" time="0.003">
    </testcase>
    <testcase classname="prestamos.routes - cobertura completa GET /test-db debe retornar información de base de datos" name="prestamos.routes - cobertura completa GET /test-db debe retornar información de base de datos" time="0.003">
    </testcase>
    <testcase classname="prestamos.routes - cobertura completa GET /test-db debe manejar error en test-db" name="prestamos.routes - cobertura completa GET /test-db debe manejar error en test-db" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="prestamos.routes - rutas inline" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:35" time="0.402" tests="2">
    <testcase classname="prestamos.routes - rutas inline GET /test debe tener ruta configurada" name="prestamos.routes - rutas inline GET /test debe tener ruta configurada" time="0.007">
    </testcase>
    <testcase classname="prestamos.routes - rutas inline GET /test-db debe tener ruta configurada" name="prestamos.routes - rutas inline GET /test-db debe tener ruta configurada" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Funciones Helper" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:35" time="0.247" tests="4">
    <testcase classname="Funciones Helper suma de dos números" name="Funciones Helper suma de dos números" time="0.001">
    </testcase>
    <testcase classname="Funciones Helper validación de email" name="Funciones Helper validación de email" time="0.001">
    </testcase>
    <testcase classname="Funciones Helper formateo de fecha" name="Funciones Helper formateo de fecha" time="0.001">
    </testcase>
    <testcase classname="Funciones Helper normalización de string a objeto" name="Funciones Helper normalización de string a objeto" time="0.01">
    </testcase>
  </testsuite>
  <testsuite name="auth-helpers" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:34" time="0.58" tests="38">
    <testcase classname="auth-helpers getUserId debe retornar null si req no es válido" name="auth-helpers getUserId debe retornar null si req no es válido" time="0.003">
    </testcase>
    <testcase classname="auth-helpers getUserId debe obtener ID de req.user" name="auth-helpers getUserId debe obtener ID de req.user" time="0.001">
    </testcase>
    <testcase classname="auth-helpers getUserId debe obtener ID de req.auth.sub" name="auth-helpers getUserId debe obtener ID de req.auth.sub" time="0.001">
    </testcase>
    <testcase classname="auth-helpers getUserId debe obtener ID de req.userId" name="auth-helpers getUserId debe obtener ID de req.userId" time="0.013">
    </testcase>
    <testcase classname="auth-helpers getUserId debe priorizar req.user sobre req.auth" name="auth-helpers getUserId debe priorizar req.user sobre req.auth" time="0.001">
    </testcase>
    <testcase classname="auth-helpers getUserRole debe retornar null si req no es válido" name="auth-helpers getUserRole debe retornar null si req no es válido" time="0.001">
    </testcase>
    <testcase classname="auth-helpers getUserRole debe obtener rol de req.user.role" name="auth-helpers getUserRole debe obtener rol de req.user.role" time="0.003">
    </testcase>
    <testcase classname="auth-helpers getUserRole debe obtener rol de req.user.rol (alternativo)" name="auth-helpers getUserRole debe obtener rol de req.user.rol (alternativo)" time="0.001">
    </testcase>
    <testcase classname="auth-helpers getUserRole debe retornar null si no hay rol" name="auth-helpers getUserRole debe retornar null si no hay rol" time="0.001">
    </testcase>
    <testcase classname="auth-helpers isAuthenticated debe retornar false si no hay usuario" name="auth-helpers isAuthenticated debe retornar false si no hay usuario" time="0.001">
    </testcase>
    <testcase classname="auth-helpers isAuthenticated debe retornar true si hay usuario" name="auth-helpers isAuthenticated debe retornar true si hay usuario" time="0.001">
    </testcase>
    <testcase classname="auth-helpers hasRole debe retornar false si role no es string válido" name="auth-helpers hasRole debe retornar false si role no es string válido" time="0.001">
    </testcase>
    <testcase classname="auth-helpers hasRole debe retornar true si el usuario tiene el rol" name="auth-helpers hasRole debe retornar true si el usuario tiene el rol" time="0.001">
    </testcase>
    <testcase classname="auth-helpers hasRole debe retornar false si el usuario no tiene el rol" name="auth-helpers hasRole debe retornar false si el usuario no tiene el rol" time="0">
    </testcase>
    <testcase classname="auth-helpers hasRole debe hacer trim del rol" name="auth-helpers hasRole debe hacer trim del rol" time="0">
    </testcase>
    <testcase classname="auth-helpers isAdmin debe retornar true para admin" name="auth-helpers isAdmin debe retornar true para admin" time="0.001">
    </testcase>
    <testcase classname="auth-helpers isAdmin debe retornar true para supadmin" name="auth-helpers isAdmin debe retornar true para supadmin" time="0.002">
    </testcase>
    <testcase classname="auth-helpers isAdmin debe retornar false para otros roles" name="auth-helpers isAdmin debe retornar false para otros roles" time="0.001">
    </testcase>
    <testcase classname="auth-helpers requireAuth debe llamar unauthorized si req no es válido" name="auth-helpers requireAuth debe llamar unauthorized si req no es válido" time="0.001">
    </testcase>
    <testcase classname="auth-helpers requireAuth debe llamar unauthorized si no está autenticado" name="auth-helpers requireAuth debe llamar unauthorized si no está autenticado" time="0.001">
    </testcase>
    <testcase classname="auth-helpers requireAuth debe llamar next si está autenticado" name="auth-helpers requireAuth debe llamar next si está autenticado" time="0.001">
    </testcase>
    <testcase classname="auth-helpers requireRole debe lanzar error si role no es string válido" name="auth-helpers requireRole debe lanzar error si role no es string válido" time="0.055">
    </testcase>
    <testcase classname="auth-helpers requireRole debe llamar unauthorized si no está autenticado" name="auth-helpers requireRole debe llamar unauthorized si no está autenticado" time="0.002">
    </testcase>
    <testcase classname="auth-helpers requireRole debe llamar forbidden si no tiene el rol requerido" name="auth-helpers requireRole debe llamar forbidden si no tiene el rol requerido" time="0.001">
    </testcase>
    <testcase classname="auth-helpers requireRole debe permitir acceso a admin aunque no tenga el rol específico" name="auth-helpers requireRole debe permitir acceso a admin aunque no tenga el rol específico" time="0.001">
    </testcase>
    <testcase classname="auth-helpers requireRole debe llamar next si tiene el rol requerido" name="auth-helpers requireRole debe llamar next si tiene el rol requerido" time="0.001">
    </testcase>
    <testcase classname="auth-helpers canAccessResource debe retornar false si req no es válido" name="auth-helpers canAccessResource debe retornar false si req no es válido" time="0.001">
    </testcase>
    <testcase classname="auth-helpers canAccessResource debe retornar false si no está autenticado" name="auth-helpers canAccessResource debe retornar false si no está autenticado" time="0.001">
    </testcase>
    <testcase classname="auth-helpers canAccessResource debe retornar true si es admin" name="auth-helpers canAccessResource debe retornar true si es admin" time="0.001">
    </testcase>
    <testcase classname="auth-helpers canAccessResource debe retornar true si es propietario" name="auth-helpers canAccessResource debe retornar true si es propietario" time="0.001">
    </testcase>
    <testcase classname="auth-helpers canAccessResource debe retornar false si no es propietario ni admin" name="auth-helpers canAccessResource debe retornar false si no es propietario ni admin" time="0.002">
    </testcase>
    <testcase classname="auth-helpers canAccessResource debe manejar resourceUserId como string" name="auth-helpers canAccessResource debe manejar resourceUserId como string" time="0.002">
    </testcase>
    <testcase classname="auth-helpers canAccessResource debe retornar false para string inválido" name="auth-helpers canAccessResource debe retornar false para string inválido" time="0.002">
    </testcase>
    <testcase classname="auth-helpers requireResourceAccess debe lanzar error si extractor no es función" name="auth-helpers requireResourceAccess debe lanzar error si extractor no es función" time="0.003">
    </testcase>
    <testcase classname="auth-helpers requireResourceAccess debe llamar unauthorized si no está autenticado" name="auth-helpers requireResourceAccess debe llamar unauthorized si no está autenticado" time="0.002">
    </testcase>
    <testcase classname="auth-helpers requireResourceAccess debe llamar forbidden si no puede acceder al recurso" name="auth-helpers requireResourceAccess debe llamar forbidden si no puede acceder al recurso" time="0.001">
    </testcase>
    <testcase classname="auth-helpers requireResourceAccess debe llamar next si puede acceder al recurso" name="auth-helpers requireResourceAccess debe llamar next si puede acceder al recurso" time="0">
    </testcase>
    <testcase classname="auth-helpers requireResourceAccess debe manejar errores del extractor" name="auth-helpers requireResourceAccess debe manejar errores del extractor" time="0.18">
    </testcase>
  </testsuite>
  <testsuite name="admin-biblioteca.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:34" time="1.061" tests="8">
    <testcase classname="admin-biblioteca.routes debe tener ruta GET /biblioteca configurada" name="admin-biblioteca.routes debe tener ruta GET /biblioteca configurada" time="0.004">
    </testcase>
    <testcase classname="admin-biblioteca.routes debe tener ruta GET /estadisticas configurada" name="admin-biblioteca.routes debe tener ruta GET /estadisticas configurada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.routes debe tener ruta GET /libros configurada" name="admin-biblioteca.routes debe tener ruta GET /libros configurada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.routes debe tener ruta POST /libros configurada" name="admin-biblioteca.routes debe tener ruta POST /libros configurada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.routes debe tener ruta POST /libros/crear configurada" name="admin-biblioteca.routes debe tener ruta POST /libros/crear configurada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.routes debe tener ruta DELETE /libros/:biblioteca_libro_id configurada" name="admin-biblioteca.routes debe tener ruta DELETE /libros/:biblioteca_libro_id configurada" time="0.004">
    </testcase>
    <testcase classname="admin-biblioteca.routes debe tener ruta GET /prestamos configurada" name="admin-biblioteca.routes debe tener ruta GET /prestamos configurada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.routes debe tener ruta PATCH /prestamos/:prestamo_id/devolver configurada" name="admin-biblioteca.routes debe tener ruta PATCH /prestamos/:prestamo_id/devolver configurada" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="register-base-middleware - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:35" time="0.581" tests="12">
    <testcase classname="register-base-middleware - cobertura completa debe registrar todos los middlewares" name="register-base-middleware - cobertura completa debe registrar todos los middlewares" time="0.012">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar helmetConfig" name="register-base-middleware - cobertura completa debe registrar helmetConfig" time="0.003">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar requestLogger" name="register-base-middleware - cobertura completa debe registrar requestLogger" time="0.001">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar securityLogger" name="register-base-middleware - cobertura completa debe registrar securityLogger" time="0.001">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe adjuntar encryptedLogger" name="register-base-middleware - cobertura completa debe adjuntar encryptedLogger" time="0">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar inputValidator" name="register-base-middleware - cobertura completa debe registrar inputValidator" time="0.001">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar security monitoring middlewares" name="register-base-middleware - cobertura completa debe registrar security monitoring middlewares" time="0.002">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar performance monitoring" name="register-base-middleware - cobertura completa debe registrar performance monitoring" time="0.002">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar express.json" name="register-base-middleware - cobertura completa debe registrar express.json" time="0.002">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar cookieParser" name="register-base-middleware - cobertura completa debe registrar cookieParser" time="0.01">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar CORS con configuración correcta" name="register-base-middleware - cobertura completa debe registrar CORS con configuración correcta" time="0.012">
    </testcase>
    <testcase classname="register-base-middleware - cobertura completa debe registrar debug logging" name="register-base-middleware - cobertura completa debe registrar debug logging" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="twofa.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:35" time="0.411" tests="5">
    <testcase classname="twofa.routes debe tener ruta POST /login/2fa configurada" name="twofa.routes debe tener ruta POST /login/2fa configurada" time="0.002">
    </testcase>
    <testcase classname="twofa.routes debe tener ruta POST /2fa/setup configurada" name="twofa.routes debe tener ruta POST /2fa/setup configurada" time="0.001">
    </testcase>
    <testcase classname="twofa.routes debe tener ruta POST /2fa/verify configurada" name="twofa.routes debe tener ruta POST /2fa/verify configurada" time="0">
    </testcase>
    <testcase classname="twofa.routes debe tener ruta POST /2fa/disable configurada" name="twofa.routes debe tener ruta POST /2fa/disable configurada" time="0">
    </testcase>
    <testcase classname="twofa.routes debe tener ruta GET /2fa/status configurada" name="twofa.routes debe tener ruta GET /2fa/status configurada" time="0">
    </testcase>
  </testsuite>
  <testsuite name="src/utils/metrics.js" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:36" time="0.257" tests="6">
    <testcase classname="src/utils/metrics.js debe exportar register" name="src/utils/metrics.js debe exportar register" time="0.019">
    </testcase>
    <testcase classname="src/utils/metrics.js debe exportar httpRequestDuration" name="src/utils/metrics.js debe exportar httpRequestDuration" time="0.003">
    </testcase>
    <testcase classname="src/utils/metrics.js debe exportar httpRequestTotal" name="src/utils/metrics.js debe exportar httpRequestTotal" time="0.002">
    </testcase>
    <testcase classname="src/utils/metrics.js debe exportar dbQueryDuration" name="src/utils/metrics.js debe exportar dbQueryDuration" time="0.002">
    </testcase>
    <testcase classname="src/utils/metrics.js debe exportar dbQueryTotal" name="src/utils/metrics.js debe exportar dbQueryTotal" time="0.002">
    </testcase>
    <testcase classname="src/utils/metrics.js debe exportar activeConnections" name="src/utils/metrics.js debe exportar activeConnections" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="prestamos.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:35" time="0.392" tests="8">
    <testcase classname="prestamos.routes debe tener ruta GET /test configurada" name="prestamos.routes debe tener ruta GET /test configurada" time="0.002">
    </testcase>
    <testcase classname="prestamos.routes debe tener ruta GET /test-db configurada" name="prestamos.routes debe tener ruta GET /test-db configurada" time="0.001">
    </testcase>
    <testcase classname="prestamos.routes debe tener ruta GET /usuario/actual configurada" name="prestamos.routes debe tener ruta GET /usuario/actual configurada" time="0">
    </testcase>
    <testcase classname="prestamos.routes debe tener ruta GET / configurada" name="prestamos.routes debe tener ruta GET / configurada" time="0.001">
    </testcase>
    <testcase classname="prestamos.routes debe tener ruta GET /:id configurada" name="prestamos.routes debe tener ruta GET /:id configurada" time="0">
    </testcase>
    <testcase classname="prestamos.routes debe tener ruta POST / configurada" name="prestamos.routes debe tener ruta POST / configurada" time="0">
    </testcase>
    <testcase classname="prestamos.routes debe tener ruta POST /:id/devolucion configurada" name="prestamos.routes debe tener ruta POST /:id/devolucion configurada" time="0.001">
    </testcase>
    <testcase classname="prestamos.routes debe tener ruta POST /:id/renovar configurada" name="prestamos.routes debe tener ruta POST /:id/renovar configurada" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="libros.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:36" time="0.468" tests="5">
    <testcase classname="libros.routes debe tener ruta GET /test-db configurada" name="libros.routes debe tener ruta GET /test-db configurada" time="0.006">
    </testcase>
    <testcase classname="libros.routes debe tener ruta GET /test-table configurada" name="libros.routes debe tener ruta GET /test-table configurada" time="0.003">
    </testcase>
    <testcase classname="libros.routes debe tener ruta GET /recomendaciones configurada" name="libros.routes debe tener ruta GET /recomendaciones configurada" time="0.001">
    </testcase>
    <testcase classname="libros.routes debe tener ruta GET / configurada" name="libros.routes debe tener ruta GET / configurada" time="0.001">
    </testcase>
    <testcase classname="libros.routes debe tener ruta GET /:id configurada" name="libros.routes debe tener ruta GET /:id configurada" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="SimpleJWT" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:36" time="0.404" tests="4">
    <testcase classname="SimpleJWT debe generar un token JWT válido" name="SimpleJWT debe generar un token JWT válido" time="0.017">
    </testcase>
    <testcase classname="SimpleJWT debe verificar un token válido correctamente" name="SimpleJWT debe verificar un token válido correctamente" time="0.009">
    </testcase>
    <testcase classname="SimpleJWT debe lanzar error al verificar token inválido" name="SimpleJWT debe lanzar error al verificar token inválido" time="0.066">
    </testcase>
    <testcase classname="SimpleJWT debe generar token con expiración personalizada" name="SimpleJWT debe generar token con expiración personalizada" time="0.015">
    </testcase>
  </testsuite>
  <testsuite name="libros.routes - rutas inline" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:37" time="0.316" tests="2">
    <testcase classname="libros.routes - rutas inline GET /test-db debe tener ruta configurada" name="libros.routes - rutas inline GET /test-db debe tener ruta configurada" time="0.002">
    </testcase>
    <testcase classname="libros.routes - rutas inline GET /test-table debe tener ruta configurada" name="libros.routes - rutas inline GET /test-table debe tener ruta configurada" time="0">
    </testcase>
  </testsuite>
  <testsuite name="hybrid-auth middleware" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:37" time="0.188" tests="6">
    <testcase classname="hybrid-auth middleware hybridAuth debe usar token de cookie si está disponible" name="hybrid-auth middleware hybridAuth debe usar token de cookie si está disponible" time="0.002">
    </testcase>
    <testcase classname="hybrid-auth middleware hybridAuth debe usar token de header Authorization como fallback" name="hybrid-auth middleware hybridAuth debe usar token de header Authorization como fallback" time="0.002">
    </testcase>
    <testcase classname="hybrid-auth middleware hybridAuth debe retornar 401 si no hay token" name="hybrid-auth middleware hybridAuth debe retornar 401 si no hay token" time="0.001">
    </testcase>
    <testcase classname="hybrid-auth middleware hybridAuth debe manejar errores de autenticación" name="hybrid-auth middleware hybridAuth debe manejar errores de autenticación" time="0.002">
    </testcase>
    <testcase classname="hybrid-auth middleware debugAuth debe ejecutar next sin modificar request" name="hybrid-auth middleware debugAuth debe ejecutar next sin modificar request" time="0.001">
    </testcase>
    <testcase classname="hybrid-auth middleware debugAuth debe mostrar información de usuario si está presente" name="hybrid-auth middleware debugAuth debe mostrar información de usuario si está presente" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="data-helpers" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:35" time="0.334" tests="36">
    <testcase classname="data-helpers isFiniteNumber debe retornar true para números finitos válidos" name="data-helpers isFiniteNumber debe retornar true para números finitos válidos" time="0.002">
    </testcase>
    <testcase classname="data-helpers isFiniteNumber debe retornar false para valores no numéricos" name="data-helpers isFiniteNumber debe retornar false para valores no numéricos" time="0.001">
    </testcase>
    <testcase classname="data-helpers isFiniteNumber debe retornar false para NaN e Infinity" name="data-helpers isFiniteNumber debe retornar false para NaN e Infinity" time="0.001">
    </testcase>
    <testcase classname="data-helpers createTypeConverter debe crear un convertidor que ejecuta la función" name="data-helpers createTypeConverter debe crear un convertidor que ejecuta la función" time="0.002">
    </testcase>
    <testcase classname="data-helpers createTypeConverter debe retornar valor por defecto cuando falla" name="data-helpers createTypeConverter debe retornar valor por defecto cuando falla" time="0.03">
    </testcase>
    <testcase classname="data-helpers createTypeConverter debe usar customDefault si se proporciona" name="data-helpers createTypeConverter debe usar customDefault si se proporciona" time="0.009">
    </testcase>
    <testcase classname="data-helpers asObject debe retornar objeto vacío para null/undefined" name="data-helpers asObject debe retornar objeto vacío para null/undefined" time="0.002">
    </testcase>
    <testcase classname="data-helpers asObject debe retornar el objeto si ya es un objeto" name="data-helpers asObject debe retornar el objeto si ya es un objeto" time="0.001">
    </testcase>
    <testcase classname="data-helpers asObject debe parsear string JSON válido" name="data-helpers asObject debe parsear string JSON válido" time="0.001">
    </testcase>
    <testcase classname="data-helpers asObject debe retornar objeto vacío para string vacío" name="data-helpers asObject debe retornar objeto vacío para string vacío" time="0.001">
    </testcase>
    <testcase classname="data-helpers asObject debe retornar objeto vacío para arrays" name="data-helpers asObject debe retornar objeto vacío para arrays" time="0.001">
    </testcase>
    <testcase classname="data-helpers asObject debe retornar objeto vacío para JSON inválido" name="data-helpers asObject debe retornar objeto vacío para JSON inválido" time="0.022">
    </testcase>
    <testcase classname="data-helpers asBoolean debe retornar false para null/undefined" name="data-helpers asBoolean debe retornar false para null/undefined" time="0.008">
    </testcase>
    <testcase classname="data-helpers asBoolean debe retornar el valor para booleanos" name="data-helpers asBoolean debe retornar el valor para booleanos" time="0.001">
    </testcase>
    <testcase classname="data-helpers asBoolean debe convertir strings a boolean" name="data-helpers asBoolean debe convertir strings a boolean" time="0.001">
    </testcase>
    <testcase classname="data-helpers asBoolean debe convertir números a boolean" name="data-helpers asBoolean debe convertir números a boolean" time="0.001">
    </testcase>
    <testcase classname="data-helpers asNumber debe convertir strings numéricos" name="data-helpers asNumber debe convertir strings numéricos" time="0">
    </testcase>
    <testcase classname="data-helpers asNumber debe retornar valor por defecto para valores inválidos" name="data-helpers asNumber debe retornar valor por defecto para valores inválidos" time="0.001">
    </testcase>
    <testcase classname="data-helpers asNumber debe retornar el número si ya es un número" name="data-helpers asNumber debe retornar el número si ya es un número" time="0.001">
    </testcase>
    <testcase classname="data-helpers asNumber debe retornar default para NaN" name="data-helpers asNumber debe retornar default para NaN" time="0">
    </testcase>
    <testcase classname="data-helpers asInteger debe convertir strings a enteros" name="data-helpers asInteger debe convertir strings a enteros" time="0.001">
    </testcase>
    <testcase classname="data-helpers asInteger debe retornar valor por defecto para valores inválidos" name="data-helpers asInteger debe retornar valor por defecto para valores inválidos" time="0">
    </testcase>
    <testcase classname="data-helpers asInteger debe convertir números a enteros" name="data-helpers asInteger debe convertir números a enteros" time="0.001">
    </testcase>
    <testcase classname="data-helpers sanitizeString debe eliminar tags HTML" name="data-helpers sanitizeString debe eliminar tags HTML" time="0.002">
    </testcase>
    <testcase classname="data-helpers sanitizeString debe escapar caracteres especiales" name="data-helpers sanitizeString debe escapar caracteres especiales" time="0.001">
    </testcase>
    <testcase classname="data-helpers sanitizeString debe eliminar caracteres de control" name="data-helpers sanitizeString debe eliminar caracteres de control" time="0.001">
    </testcase>
    <testcase classname="data-helpers sanitizeString debe trim espacios" name="data-helpers sanitizeString debe trim espacios" time="0.001">
    </testcase>
    <testcase classname="data-helpers sanitizeString debe retornar string vacío para valores no string" name="data-helpers sanitizeString debe retornar string vacío para valores no string" time="0.001">
    </testcase>
    <testcase classname="data-helpers cleanObject debe eliminar propiedades undefined/null/vacías" name="data-helpers cleanObject debe eliminar propiedades undefined/null/vacías" time="0.001">
    </testcase>
    <testcase classname="data-helpers cleanObject debe retornar objeto vacío para objeto vacío" name="data-helpers cleanObject debe retornar objeto vacío para objeto vacío" time="0.001">
    </testcase>
    <testcase classname="data-helpers getValue debe obtener valor de objeto" name="data-helpers getValue debe obtener valor de objeto" time="0">
    </testcase>
    <testcase classname="data-helpers getValue debe retornar default si no existe" name="data-helpers getValue debe retornar default si no existe" time="0">
    </testcase>
    <testcase classname="data-helpers getValue debe retornar default para objeto inválido" name="data-helpers getValue debe retornar default para objeto inválido" time="0.001">
    </testcase>
    <testcase classname="data-helpers indexBy debe indexar array por clave" name="data-helpers indexBy debe indexar array por clave" time="0.007">
    </testcase>
    <testcase classname="data-helpers indexBy debe retornar objeto vacío para array vacío" name="data-helpers indexBy debe retornar objeto vacío para array vacío" time="0.001">
    </testcase>
    <testcase classname="data-helpers indexBy debe retornar objeto vacío para clave inválida" name="data-helpers indexBy debe retornar objeto vacío para clave inválida" time="0">
    </testcase>
  </testsuite>
  <testsuite name="prestamos.controller - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:37" time="0.246" tests="5">
    <testcase classname="prestamos.controller - cobertura completa buildPrestamosFilters debe construir filtros con todos los parámetros" name="prestamos.controller - cobertura completa buildPrestamosFilters debe construir filtros con todos los parámetros" time="0.004">
    </testcase>
    <testcase classname="prestamos.controller - cobertura completa buildPrestamosFilters debe manejar activo=false" name="prestamos.controller - cobertura completa buildPrestamosFilters debe manejar activo=false" time="0.008">
    </testcase>
    <testcase classname="prestamos.controller - cobertura completa crearPrestamo - casos edge debe manejar error en transacción" name="prestamos.controller - cobertura completa crearPrestamo - casos edge debe manejar error en transacción" time="0.003">
    </testcase>
    <testcase classname="prestamos.controller - cobertura completa marcarDevolucion - casos edge debe manejar error al actualizar" name="prestamos.controller - cobertura completa marcarDevolucion - casos edge debe manejar error al actualizar" time="0.003">
    </testcase>
    <testcase classname="prestamos.controller - cobertura completa renovarPrestamo - casos edge debe manejar error al actualizar" name="prestamos.controller - cobertura completa renovarPrestamo - casos edge debe manejar error al actualizar" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="metrics.routes" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:37" time="0.83" tests="2">
    <testcase classname="metrics.routes GET /metrics debe retornar métricas en formato Prometheus" name="metrics.routes GET /metrics debe retornar métricas en formato Prometheus" time="0.058">
    </testcase>
    <testcase classname="metrics.routes GET /metrics debe manejar errores" name="metrics.routes GET /metrics debe manejar errores" time="0.025">
    </testcase>
  </testsuite>
  <testsuite name="error-handler - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:37" time="0.279" tests="15">
    <testcase classname="error-handler - casos adicionales handleError - casos edge debe manejar AppError con statusCode inválido" name="error-handler - casos adicionales handleError - casos edge debe manejar AppError con statusCode inválido" time="0.002">
    </testcase>
    <testcase classname="error-handler - casos adicionales handleError - casos edge debe manejar AppError con details" name="error-handler - casos adicionales handleError - casos edge debe manejar AppError con details" time="0.002">
    </testcase>
    <testcase classname="error-handler - casos adicionales handleError - casos edge debe manejar AppError sin message" name="error-handler - casos adicionales handleError - casos edge debe manejar AppError sin message" time="0.001">
    </testcase>
    <testcase classname="error-handler - casos adicionales handleError - casos edge debe manejar todos los códigos de error de PostgreSQL" name="error-handler - casos adicionales handleError - casos edge debe manejar todos los códigos de error de PostgreSQL" time="0.01">
    </testcase>
    <testcase classname="error-handler - casos adicionales handleError - casos edge debe manejar error con código no string" name="error-handler - casos adicionales handleError - casos edge debe manejar error con código no string" time="0.002">
    </testcase>
    <testcase classname="error-handler - casos adicionales handleError - casos edge debe manejar fallbackMessage vacío" name="error-handler - casos adicionales handleError - casos edge debe manejar fallbackMessage vacío" time="0.004">
    </testcase>
    <testcase classname="error-handler - casos adicionales handleError - casos edge debe manejar context no string" name="error-handler - casos adicionales handleError - casos edge debe manejar context no string" time="0.001">
    </testcase>
    <testcase classname="error-handler - casos adicionales asyncHandler - casos edge debe lanzar error si fn no es función" name="error-handler - casos adicionales asyncHandler - casos edge debe lanzar error si fn no es función" time="0.029">
    </testcase>
    <testcase classname="error-handler - casos adicionales asyncHandler - casos edge debe manejar errorMessage vacío" name="error-handler - casos adicionales asyncHandler - casos edge debe manejar errorMessage vacío" time="0.005">
    </testcase>
    <testcase classname="error-handler - casos adicionales asyncHandler - casos edge debe usar nombre de función si está disponible" name="error-handler - casos adicionales asyncHandler - casos edge debe usar nombre de función si está disponible" time="0.001">
    </testcase>
    <testcase classname="error-handler - casos adicionales promiseHandler - casos edge debe manejar AppError en promesa" name="error-handler - casos adicionales promiseHandler - casos edge debe manejar AppError en promesa" time="0.005">
    </testcase>
    <testcase classname="error-handler - casos adicionales promiseHandler - casos edge debe manejar errorMessage vacío" name="error-handler - casos adicionales promiseHandler - casos edge debe manejar errorMessage vacío" time="0.001">
    </testcase>
    <testcase classname="error-handler - casos adicionales promiseHandler - casos edge debe lanzar error si promise es null" name="error-handler - casos adicionales promiseHandler - casos edge debe lanzar error si promise es null" time="0.002">
    </testcase>
    <testcase classname="error-handler - casos adicionales promiseHandler - casos edge debe lanzar error si promise es undefined" name="error-handler - casos adicionales promiseHandler - casos edge debe lanzar error si promise es undefined" time="0.002">
    </testcase>
    <testcase classname="error-handler - casos adicionales promiseHandler - casos edge debe lanzar error si no es promesa" name="error-handler - casos adicionales promiseHandler - casos edge debe lanzar error si no es promesa" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="prestamos.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:36" time="0.337" tests="33">
    <testcase classname="prestamos.controller obtenerPrestamos debe obtener todos los préstamos sin filtros" name="prestamos.controller obtenerPrestamos debe obtener todos los préstamos sin filtros" time="0.004">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamos debe filtrar por usuario_id" name="prestamos.controller obtenerPrestamos debe filtrar por usuario_id" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamos debe filtrar por biblioteca_id" name="prestamos.controller obtenerPrestamos debe filtrar por biblioteca_id" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamos debe filtrar por activo=true" name="prestamos.controller obtenerPrestamos debe filtrar por activo=true" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamos debe filtrar por activo=false" name="prestamos.controller obtenerPrestamos debe filtrar por activo=false" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamos debe manejar paginación" name="prestamos.controller obtenerPrestamos debe manejar paginación" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamos debe manejar errores" name="prestamos.controller obtenerPrestamos debe manejar errores" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamoPorId debe obtener un préstamo por ID" name="prestamos.controller obtenerPrestamoPorId debe obtener un préstamo por ID" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamoPorId debe retornar 404 si el préstamo no existe" name="prestamos.controller obtenerPrestamoPorId debe retornar 404 si el préstamo no existe" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamoPorId debe manejar errores" name="prestamos.controller obtenerPrestamoPorId debe manejar errores" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller crearPrestamo debe retornar 401 si no hay usuario autenticado" name="prestamos.controller crearPrestamo debe retornar 401 si no hay usuario autenticado" time="0.006">
    </testcase>
    <testcase classname="prestamos.controller crearPrestamo debe retornar 400 si falta libro_id" name="prestamos.controller crearPrestamo debe retornar 400 si falta libro_id" time="0.004">
    </testcase>
    <testcase classname="prestamos.controller crearPrestamo debe retornar 404 si el libro no existe" name="prestamos.controller crearPrestamo debe retornar 404 si el libro no existe" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller crearPrestamo debe retornar 409 si el libro no está disponible" name="prestamos.controller crearPrestamo debe retornar 409 si el libro no está disponible" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller crearPrestamo debe retornar 404 si no hay copias disponibles" name="prestamos.controller crearPrestamo debe retornar 404 si no hay copias disponibles" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller crearPrestamo debe retornar 409 si el usuario ya tiene un préstamo activo" name="prestamos.controller crearPrestamo debe retornar 409 si el usuario ya tiene un préstamo activo" time="0.003">
    </testcase>
    <testcase classname="prestamos.controller crearPrestamo debe crear un préstamo exitosamente" name="prestamos.controller crearPrestamo debe crear un préstamo exitosamente" time="0.004">
    </testcase>
    <testcase classname="prestamos.controller crearPrestamo debe manejar errores en transacción" name="prestamos.controller crearPrestamo debe manejar errores en transacción" time="0.005">
    </testcase>
    <testcase classname="prestamos.controller marcarDevolucion debe retornar 404 si el préstamo no existe" name="prestamos.controller marcarDevolucion debe retornar 404 si el préstamo no existe" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller marcarDevolucion debe retornar 400 si el préstamo ya fue devuelto" name="prestamos.controller marcarDevolucion debe retornar 400 si el préstamo ya fue devuelto" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller marcarDevolucion debe retornar 403 si no tiene permisos" name="prestamos.controller marcarDevolucion debe retornar 403 si no tiene permisos" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller marcarDevolucion debe permitir a admin devolver cualquier préstamo" name="prestamos.controller marcarDevolucion debe permitir a admin devolver cualquier préstamo" time="0.003">
    </testcase>
    <testcase classname="prestamos.controller marcarDevolucion debe marcar devolución exitosamente" name="prestamos.controller marcarDevolucion debe marcar devolución exitosamente" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller marcarDevolucion debe manejar errores" name="prestamos.controller marcarDevolucion debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller renovarPrestamo debe retornar 404 si el préstamo no existe" name="prestamos.controller renovarPrestamo debe retornar 404 si el préstamo no existe" time="0.004">
    </testcase>
    <testcase classname="prestamos.controller renovarPrestamo debe retornar 400 si el préstamo ya fue devuelto" name="prestamos.controller renovarPrestamo debe retornar 400 si el préstamo ya fue devuelto" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller renovarPrestamo debe retornar 403 si no tiene permisos" name="prestamos.controller renovarPrestamo debe retornar 403 si no tiene permisos" time="0.006">
    </testcase>
    <testcase classname="prestamos.controller renovarPrestamo debe retornar 400 si el préstamo está vencido" name="prestamos.controller renovarPrestamo debe retornar 400 si el préstamo está vencido" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller renovarPrestamo debe renovar préstamo exitosamente" name="prestamos.controller renovarPrestamo debe renovar préstamo exitosamente" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller renovarPrestamo debe manejar errores" name="prestamos.controller renovarPrestamo debe manejar errores" time="0.005">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamosUsuarioActual debe manejar error si no hay usuario autenticado" name="prestamos.controller obtenerPrestamosUsuarioActual debe manejar error si no hay usuario autenticado" time="0.004">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamosUsuarioActual debe obtener préstamos del usuario actual" name="prestamos.controller obtenerPrestamosUsuarioActual debe obtener préstamos del usuario actual" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller obtenerPrestamosUsuarioActual debe manejar errores" name="prestamos.controller obtenerPrestamosUsuarioActual debe manejar errores" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="libros.service" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:36" time="0.391" tests="34">
    <testcase classname="libros.service searchLibros debe buscar libros sin filtros" name="libros.service searchLibros debe buscar libros sin filtros" time="0.01">
    </testcase>
    <testcase classname="libros.service searchLibros debe buscar libros con término de búsqueda" name="libros.service searchLibros debe buscar libros con término de búsqueda" time="0.002">
    </testcase>
    <testcase classname="libros.service searchLibros debe filtrar por categorías" name="libros.service searchLibros debe filtrar por categorías" time="0.007">
    </testcase>
    <testcase classname="libros.service searchLibros debe filtrar por disponibilidad" name="libros.service searchLibros debe filtrar por disponibilidad" time="0.003">
    </testcase>
    <testcase classname="libros.service searchLibros debe filtrar por biblioteca_id (incluyendo 0 como valor válido)" name="libros.service searchLibros debe filtrar por biblioteca_id (incluyendo 0 como valor válido)" time="0.001">
    </testcase>
    <testcase classname="libros.service searchLibros debe filtrar por biblioteca_id como string &quot;0&quot;" name="libros.service searchLibros debe filtrar por biblioteca_id como string &quot;0&quot;" time="0.001">
    </testcase>
    <testcase classname="libros.service searchLibros debe ignorar biblioteca_id cuando es &quot;todas&quot;" name="libros.service searchLibros debe ignorar biblioteca_id cuando es &quot;todas&quot;" time="0.001">
    </testcase>
    <testcase classname="libros.service searchLibros debe manejar paginación" name="libros.service searchLibros debe manejar paginación" time="0.001">
    </testcase>
    <testcase classname="libros.service searchLibros debe manejar errores" name="libros.service searchLibros debe manejar errores" time="0.038">
    </testcase>
    <testcase classname="libros.service findLibroById debe encontrar un libro por ID" name="libros.service findLibroById debe encontrar un libro por ID" time="0.002">
    </testcase>
    <testcase classname="libros.service findLibroById debe retornar null si el libro no existe" name="libros.service findLibroById debe retornar null si el libro no existe" time="0.013">
    </testcase>
    <testcase classname="libros.service findLibroById debe manejar errores" name="libros.service findLibroById debe manejar errores" time="0.003">
    </testcase>
    <testcase classname="libros.service createLibro debe crear un libro exitosamente" name="libros.service createLibro debe crear un libro exitosamente" time="0.002">
    </testcase>
    <testcase classname="libros.service createLibro debe lanzar error si falta título o autor" name="libros.service createLibro debe lanzar error si falta título o autor" time="0.01">
    </testcase>
    <testcase classname="libros.service createLibro debe manejar errores" name="libros.service createLibro debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="libros.service updateLibro debe actualizar un libro exitosamente" name="libros.service updateLibro debe actualizar un libro exitosamente" time="0.002">
    </testcase>
    <testcase classname="libros.service updateLibro debe lanzar AppError si el libro no existe" name="libros.service updateLibro debe lanzar AppError si el libro no existe" time="0.002">
    </testcase>
    <testcase classname="libros.service updateLibro debe manejar errores" name="libros.service updateLibro debe manejar errores" time="0.002">
    </testcase>
    <testcase classname="libros.service deleteLibro debe eliminar un libro exitosamente" name="libros.service deleteLibro debe eliminar un libro exitosamente" time="0.001">
    </testcase>
    <testcase classname="libros.service deleteLibro debe lanzar AppError si el libro no existe" name="libros.service deleteLibro debe lanzar AppError si el libro no existe" time="0.001">
    </testcase>
    <testcase classname="libros.service deleteLibro debe lanzar AppError si tiene préstamos asociados" name="libros.service deleteLibro debe lanzar AppError si tiene préstamos asociados" time="0.001">
    </testcase>
    <testcase classname="libros.service deleteLibro debe manejar errores" name="libros.service deleteLibro debe manejar errores" time="0.002">
    </testcase>
    <testcase classname="libros.service updateLibroImage debe actualizar la imagen de un libro" name="libros.service updateLibroImage debe actualizar la imagen de un libro" time="0.002">
    </testcase>
    <testcase classname="libros.service updateLibroImage debe lanzar AppError si el libro no existe" name="libros.service updateLibroImage debe lanzar AppError si el libro no existe" time="0.001">
    </testcase>
    <testcase classname="libros.service obtenerRecomendaciones debe obtener recomendaciones para usuario" name="libros.service obtenerRecomendaciones debe obtener recomendaciones para usuario" time="0.007">
    </testcase>
    <testcase classname="libros.service obtenerRecomendaciones debe manejar usuario sin preferencias" name="libros.service obtenerRecomendaciones debe manejar usuario sin preferencias" time="0.001">
    </testcase>
    <testcase classname="libros.service obtenerRecomendaciones debe filtrar categorías inválidas" name="libros.service obtenerRecomendaciones debe filtrar categorías inválidas" time="0.001">
    </testcase>
    <testcase classname="libros.service obtenerRecomendaciones debe lanzar error si no hay usuario" name="libros.service obtenerRecomendaciones debe lanzar error si no hay usuario" time="0.002">
    </testcase>
    <testcase classname="libros.service obtenerRecomendaciones debe lanzar error si el usuario no existe" name="libros.service obtenerRecomendaciones debe lanzar error si el usuario no existe" time="0.001">
    </testcase>
    <testcase classname="libros.service obtenerRecomendaciones debe manejar errores" name="libros.service obtenerRecomendaciones debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="libros.service normalizeLibroFilters - casos edge searchLibros debe normalizar límite máximo" name="libros.service normalizeLibroFilters - casos edge searchLibros debe normalizar límite máximo" time="0.002">
    </testcase>
    <testcase classname="libros.service normalizeLibroFilters - casos edge searchLibros debe normalizar offset negativo" name="libros.service normalizeLibroFilters - casos edge searchLibros debe normalizar offset negativo" time="0.002">
    </testcase>
    <testcase classname="libros.service normalizeLibroFilters - casos edge searchLibros debe parsear categorías como string" name="libros.service normalizeLibroFilters - casos edge searchLibros debe parsear categorías como string" time="0.001">
    </testcase>
    <testcase classname="libros.service normalizeLibroFilters - casos edge searchLibros debe filtrar por biblioteca_id" name="libros.service normalizeLibroFilters - casos edge searchLibros debe filtrar por biblioteca_id" time="0">
    </testcase>
  </testsuite>
  <testsuite name="auth-middleware-helpers" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:36" time="0.331" tests="36">
    <testcase classname="auth-middleware-helpers checkAuthentication debe retornar false y llamar unauthorized si no hay usuario" name="auth-middleware-helpers checkAuthentication debe retornar false y llamar unauthorized si no hay usuario" time="0.006">
    </testcase>
    <testcase classname="auth-middleware-helpers checkAuthentication debe retornar true si hay usuario" name="auth-middleware-helpers checkAuthentication debe retornar true si hay usuario" time="0.004">
    </testcase>
    <testcase classname="auth-middleware-helpers hasRoleAccess debe retornar true si el usuario es admin" name="auth-middleware-helpers hasRoleAccess debe retornar true si el usuario es admin" time="0">
    </testcase>
    <testcase classname="auth-middleware-helpers hasRoleAccess debe retornar true si el usuario es supadmin" name="auth-middleware-helpers hasRoleAccess debe retornar true si el usuario es supadmin" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers hasRoleAccess debe retornar true si el rol coincide con string requerido" name="auth-middleware-helpers hasRoleAccess debe retornar true si el rol coincide con string requerido" time="0.002">
    </testcase>
    <testcase classname="auth-middleware-helpers hasRoleAccess debe retornar false si el rol no coincide" name="auth-middleware-helpers hasRoleAccess debe retornar false si el rol no coincide" time="0.002">
    </testcase>
    <testcase classname="auth-middleware-helpers hasRoleAccess debe retornar true si el rol está en el array requerido" name="auth-middleware-helpers hasRoleAccess debe retornar true si el rol está en el array requerido" time="0.002">
    </testcase>
    <testcase classname="auth-middleware-helpers hasRoleAccess debe retornar false si el rol no está en el array requerido" name="auth-middleware-helpers hasRoleAccess debe retornar false si el rol no está en el array requerido" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers requireRole debe llamar unauthorized si no hay usuario" name="auth-middleware-helpers requireRole debe llamar unauthorized si no hay usuario" time="0.002">
    </testcase>
    <testcase classname="auth-middleware-helpers requireRole debe llamar forbidden si el usuario no tiene el rol requerido" name="auth-middleware-helpers requireRole debe llamar forbidden si el usuario no tiene el rol requerido" time="0.005">
    </testcase>
    <testcase classname="auth-middleware-helpers requireRole debe llamar next si el usuario tiene el rol requerido" name="auth-middleware-helpers requireRole debe llamar next si el usuario tiene el rol requerido" time="0.016">
    </testcase>
    <testcase classname="auth-middleware-helpers requireAnyRole debe llamar unauthorized si no hay usuario" name="auth-middleware-helpers requireAnyRole debe llamar unauthorized si no hay usuario" time="0.002">
    </testcase>
    <testcase classname="auth-middleware-helpers requireAnyRole debe llamar forbidden si el usuario no tiene ninguno de los roles" name="auth-middleware-helpers requireAnyRole debe llamar forbidden si el usuario no tiene ninguno de los roles" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers requireAnyRole debe llamar next si el usuario tiene uno de los roles" name="auth-middleware-helpers requireAnyRole debe llamar next si el usuario tiene uno de los roles" time="0.012">
    </testcase>
    <testcase classname="auth-middleware-helpers requireOwnershipOrAdmin debe llamar unauthorized si no hay usuario" name="auth-middleware-helpers requireOwnershipOrAdmin debe llamar unauthorized si no hay usuario" time="0.002">
    </testcase>
    <testcase classname="auth-middleware-helpers requireOwnershipOrAdmin debe permitir acceso a admin" name="auth-middleware-helpers requireOwnershipOrAdmin debe permitir acceso a admin" time="0.003">
    </testcase>
    <testcase classname="auth-middleware-helpers requireOwnershipOrAdmin debe permitir acceso a supadmin" name="auth-middleware-helpers requireOwnershipOrAdmin debe permitir acceso a supadmin" time="0.004">
    </testcase>
    <testcase classname="auth-middleware-helpers requireOwnershipOrAdmin debe permitir acceso si el usuario es propietario" name="auth-middleware-helpers requireOwnershipOrAdmin debe permitir acceso si el usuario es propietario" time="0.004">
    </testcase>
    <testcase classname="auth-middleware-helpers requireOwnershipOrAdmin debe llamar forbidden si el usuario no es propietario ni admin" name="auth-middleware-helpers requireOwnershipOrAdmin debe llamar forbidden si el usuario no es propietario ni admin" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers requireOwnershipOrAdmin debe usar el parámetro personalizado" name="auth-middleware-helpers requireOwnershipOrAdmin debe usar el parámetro personalizado" time="0.004">
    </testcase>
    <testcase classname="auth-middleware-helpers extractTokenFromHeader debe retornar null si no hay header authorization" name="auth-middleware-helpers extractTokenFromHeader debe retornar null si no hay header authorization" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers extractTokenFromHeader debe retornar null si el header no empieza con Bearer" name="auth-middleware-helpers extractTokenFromHeader debe retornar null si el header no empieza con Bearer" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers extractTokenFromHeader debe extraer el token correctamente" name="auth-middleware-helpers extractTokenFromHeader debe extraer el token correctamente" time="0">
    </testcase>
    <testcase classname="auth-middleware-helpers extractTokenFromHeader debe retornar null si el token está vacío" name="auth-middleware-helpers extractTokenFromHeader debe retornar null si el token está vacío" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers setUserFromDecoded debe configurar req.user con información del token" name="auth-middleware-helpers setUserFromDecoded debe configurar req.user con información del token" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers setUserFromDecoded debe usar id si user_id no existe" name="auth-middleware-helpers setUserFromDecoded debe usar id si user_id no existe" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers setUserFromDecoded debe agregar authSource si se proporciona" name="auth-middleware-helpers setUserFromDecoded debe agregar authSource si se proporciona" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers handleAuthError debe manejar JsonWebTokenError" name="auth-middleware-helpers handleAuthError debe manejar JsonWebTokenError" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers handleAuthError debe manejar TokenExpiredError" name="auth-middleware-helpers handleAuthError debe manejar TokenExpiredError" time="0">
    </testcase>
    <testcase classname="auth-middleware-helpers handleAuthError debe retornar false para errores no reconocidos" name="auth-middleware-helpers handleAuthError debe retornar false para errores no reconocidos" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers handleAuthError debe agregar authSource a la respuesta si se proporciona" name="auth-middleware-helpers handleAuthError debe agregar authSource a la respuesta si se proporciona" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers handleAuthServerError debe retornar respuesta 500" name="auth-middleware-helpers handleAuthServerError debe retornar respuesta 500" time="0.003">
    </testcase>
    <testcase classname="auth-middleware-helpers handleAuthServerError debe incluir authSource si se proporciona" name="auth-middleware-helpers handleAuthServerError debe incluir authSource si se proporciona" time="0.006">
    </testcase>
    <testcase classname="auth-middleware-helpers checkPermission debe llamar unauthorized si no hay usuario" name="auth-middleware-helpers checkPermission debe llamar unauthorized si no hay usuario" time="0.005">
    </testcase>
    <testcase classname="auth-middleware-helpers checkPermission debe llamar forbidden si el usuario no tiene el permiso" name="auth-middleware-helpers checkPermission debe llamar forbidden si el usuario no tiene el permiso" time="0.001">
    </testcase>
    <testcase classname="auth-middleware-helpers checkPermission debe llamar next si el usuario tiene el permiso" name="auth-middleware-helpers checkPermission debe llamar next si el usuario tiene el permiso" time="0.008">
    </testcase>
  </testsuite>
  <testsuite name="realtime-monitoring - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:38" time="0.32" tests="5">
    <testcase classname="realtime-monitoring - cobertura completa getDiskUsage - casos edge debe retornar valores por defecto si hay error" name="realtime-monitoring - cobertura completa getDiskUsage - casos edge debe retornar valores por defecto si hay error" time="0.064">
    </testcase>
    <testcase classname="realtime-monitoring - cobertura completa calculateAverageResponseTime debe retornar 0 si no hay tiempos" name="realtime-monitoring - cobertura completa calculateAverageResponseTime debe retornar 0 si no hay tiempos" time="0.001">
    </testcase>
    <testcase classname="realtime-monitoring - cobertura completa calculateAverageResponseTime debe calcular promedio correctamente" name="realtime-monitoring - cobertura completa calculateAverageResponseTime debe calcular promedio correctamente" time="0.002">
    </testcase>
    <testcase classname="realtime-monitoring - cobertura completa recordRequest - casos edge debe limitar tamaño de responseTimes" name="realtime-monitoring - cobertura completa recordRequest - casos edge debe limitar tamaño de responseTimes" time="0.004">
    </testcase>
    <testcase classname="realtime-monitoring - cobertura completa checkThresholds - casos edge debe manejar error en alertas" name="realtime-monitoring - cobertura completa checkThresholds - casos edge debe manejar error en alertas" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="supadmin.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:38" time="0.237" tests="12">
    <testcase classname="supadmin.controller obtenerEstadisticasGlobales debe obtener estadísticas globales exitosamente" name="supadmin.controller obtenerEstadisticasGlobales debe obtener estadísticas globales exitosamente" time="0.005">
    </testcase>
    <testcase classname="supadmin.controller obtenerEstadisticasGlobales debe manejar errores" name="supadmin.controller obtenerEstadisticasGlobales debe manejar errores" time="0.002">
    </testcase>
    <testcase classname="supadmin.controller obtenerLogs debe obtener logs de aplicación" name="supadmin.controller obtenerLogs debe obtener logs de aplicación" time="0.001">
    </testcase>
    <testcase classname="supadmin.controller obtenerLogs debe obtener logs de seguridad" name="supadmin.controller obtenerLogs debe obtener logs de seguridad" time="0.001">
    </testcase>
    <testcase classname="supadmin.controller obtenerLogs debe obtener logs de auditoría" name="supadmin.controller obtenerLogs debe obtener logs de auditoría" time="0.002">
    </testcase>
    <testcase classname="supadmin.controller obtenerLogs debe obtener logs de error" name="supadmin.controller obtenerLogs debe obtener logs de error" time="0">
    </testcase>
    <testcase classname="supadmin.controller obtenerLogs debe filtrar logs por nivel" name="supadmin.controller obtenerLogs debe filtrar logs por nivel" time="0.001">
    </testcase>
    <testcase classname="supadmin.controller obtenerLogs debe aplicar paginación" name="supadmin.controller obtenerLogs debe aplicar paginación" time="0.008">
    </testcase>
    <testcase classname="supadmin.controller obtenerLogs debe manejar errores" name="supadmin.controller obtenerLogs debe manejar errores" time="0.009">
    </testcase>
    <testcase classname="supadmin.controller obtenerActividadReciente debe obtener actividad reciente exitosamente" name="supadmin.controller obtenerActividadReciente debe obtener actividad reciente exitosamente" time="0.003">
    </testcase>
    <testcase classname="supadmin.controller obtenerActividadReciente debe filtrar por tipo" name="supadmin.controller obtenerActividadReciente debe filtrar por tipo" time="0.015">
    </testcase>
    <testcase classname="supadmin.controller obtenerActividadReciente debe manejar errores" name="supadmin.controller obtenerActividadReciente debe manejar errores" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="database-ssl - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:38" time="0.323" tests="17">
    <testcase classname="database-ssl - cobertura completa createSecurePool debe crear pool sin SSL en desarrollo" name="database-ssl - cobertura completa createSecurePool debe crear pool sin SSL en desarrollo" time="0.01">
    </testcase>
    <testcase classname="database-ssl - cobertura completa createSecurePool debe crear pool con SSL en producción" name="database-ssl - cobertura completa createSecurePool debe crear pool con SSL en producción" time="0.003">
    </testcase>
    <testcase classname="database-ssl - cobertura completa createSecurePool debe crear pool con SSL opcional en desarrollo" name="database-ssl - cobertura completa createSecurePool debe crear pool con SSL opcional en desarrollo" time="0.007">
    </testcase>
    <testcase classname="database-ssl - cobertura completa createSecurePool debe registrar event handlers" name="database-ssl - cobertura completa createSecurePool debe registrar event handlers" time="0.004">
    </testcase>
    <testcase classname="database-ssl - cobertura completa createSecurePool debe probar conexión exitosamente" name="database-ssl - cobertura completa createSecurePool debe probar conexión exitosamente" time="0.002">
    </testcase>
    <testcase classname="database-ssl - cobertura completa createSecurePool debe manejar error en testConnection" name="database-ssl - cobertura completa createSecurePool debe manejar error en testConnection" time="0.002">
    </testcase>
    <testcase classname="database-ssl - cobertura completa createSecurePool debe retornar estadísticas del pool" name="database-ssl - cobertura completa createSecurePool debe retornar estadísticas del pool" time="0.004">
    </testcase>
    <testcase classname="database-ssl - cobertura completa createSecurePool debe cerrar pool correctamente" name="database-ssl - cobertura completa createSecurePool debe cerrar pool correctamente" time="0.018">
    </testcase>
    <testcase classname="database-ssl - cobertura completa createSecurePool debe manejar error al cerrar pool" name="database-ssl - cobertura completa createSecurePool debe manejar error al cerrar pool" time="0.005">
    </testcase>
    <testcase classname="database-ssl - cobertura completa getSSLConfig debe retornar configuración para development" name="database-ssl - cobertura completa getSSLConfig debe retornar configuración para development" time="0.009">
    </testcase>
    <testcase classname="database-ssl - cobertura completa getSSLConfig debe retornar configuración para staging" name="database-ssl - cobertura completa getSSLConfig debe retornar configuración para staging" time="0.001">
    </testcase>
    <testcase classname="database-ssl - cobertura completa getSSLConfig debe retornar configuración para production" name="database-ssl - cobertura completa getSSLConfig debe retornar configuración para production" time="0.002">
    </testcase>
    <testcase classname="database-ssl - cobertura completa getSSLConfig debe usar development como default" name="database-ssl - cobertura completa getSSLConfig debe usar development como default" time="0.001">
    </testcase>
    <testcase classname="database-ssl - cobertura completa validateSSLConfig debe validar configuración básica" name="database-ssl - cobertura completa validateSSLConfig debe validar configuración básica" time="0.002">
    </testcase>
    <testcase classname="database-ssl - cobertura completa validateSSLConfig debe advertir sobre variables faltantes" name="database-ssl - cobertura completa validateSSLConfig debe advertir sobre variables faltantes" time="0.002">
    </testcase>
    <testcase classname="database-ssl - cobertura completa validateSSLConfig debe requerir SSL vars en producción" name="database-ssl - cobertura completa validateSSLConfig debe requerir SSL vars en producción" time="0.007">
    </testcase>
    <testcase classname="database-ssl - cobertura completa validateSSLConfig debe validar SSL vars en producción" name="database-ssl - cobertura completa validateSSLConfig debe validar SSL vars en producción" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="database-ssl" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:38" time="0.404" tests="6">
    <testcase classname="database-ssl createSecurePool debe crear pool con SSL en producción" name="database-ssl createSecurePool debe crear pool con SSL en producción" time="0.004">
    </testcase>
    <testcase classname="database-ssl createSecurePool debe crear pool sin SSL en desarrollo" name="database-ssl createSecurePool debe crear pool sin SSL en desarrollo" time="0.001">
    </testcase>
    <testcase classname="database-ssl getSSLConfig debe retornar configuración para development" name="database-ssl getSSLConfig debe retornar configuración para development" time="0">
    </testcase>
    <testcase classname="database-ssl getSSLConfig debe retornar configuración para production" name="database-ssl getSSLConfig debe retornar configuración para production" time="0.005">
    </testcase>
    <testcase classname="database-ssl validateSSLConfig debe validar configuración SSL" name="database-ssl validateSSLConfig debe validar configuración SSL" time="0.002">
    </testcase>
    <testcase classname="database-ssl validateSSLConfig debe retornar false si faltan variables SSL en producción" name="database-ssl validateSSLConfig debe retornar false si faltan variables SSL en producción" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="jwt-compatibility middleware" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:39" time="0.245" tests="5">
    <testcase classname="jwt-compatibility middleware debe continuar si no hay header Authorization" name="jwt-compatibility middleware debe continuar si no hay header Authorization" time="0.007">
    </testcase>
    <testcase classname="jwt-compatibility middleware debe continuar si el header no empieza con Bearer" name="jwt-compatibility middleware debe continuar si el header no empieza con Bearer" time="0.002">
    </testcase>
    <testcase classname="jwt-compatibility middleware debe verificar token con jwt-rotation exitosamente" name="jwt-compatibility middleware debe verificar token con jwt-rotation exitosamente" time="0.007">
    </testcase>
    <testcase classname="jwt-compatibility middleware debe usar verificación directa si jwt-rotation falla" name="jwt-compatibility middleware debe usar verificación directa si jwt-rotation falla" time="0.004">
    </testcase>
    <testcase classname="jwt-compatibility middleware debe retornar 401 si ambas verificaciones fallan" name="jwt-compatibility middleware debe retornar 401 si ambas verificaciones fallan" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="http-response" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:38" time="0.338" tests="20">
    <testcase classname="http-response validateResponse debe lanzar error si res no es válido" name="http-response validateResponse debe lanzar error si res no es válido" time="0.056">
    </testcase>
    <testcase classname="http-response validateResponse no debe lanzar error si res es válido" name="http-response validateResponse no debe lanzar error si res es válido" time="0.001">
    </testcase>
    <testcase classname="http-response validateStatusCode debe retornar el código si es válido" name="http-response validateStatusCode debe retornar el código si es válido" time="0.001">
    </testcase>
    <testcase classname="http-response validateStatusCode debe retornar 500 para códigos inválidos" name="http-response validateStatusCode debe retornar 500 para códigos inválidos" time="0.001">
    </testcase>
    <testcase classname="http-response validateMessage debe retornar el mensaje si es válido" name="http-response validateMessage debe retornar el mensaje si es válido" time="0.001">
    </testcase>
    <testcase classname="http-response validateMessage debe retornar valor por defecto para mensajes inválidos" name="http-response validateMessage debe retornar valor por defecto para mensajes inválidos" time="0.001">
    </testcase>
    <testcase classname="http-response success debe retornar respuesta exitosa con datos" name="http-response success debe retornar respuesta exitosa con datos" time="0.004">
    </testcase>
    <testcase classname="http-response success debe retornar respuesta exitosa sin mensaje" name="http-response success debe retornar respuesta exitosa sin mensaje" time="0.001">
    </testcase>
    <testcase classname="http-response error debe retornar respuesta de error" name="http-response error debe retornar respuesta de error" time="0.003">
    </testcase>
    <testcase classname="http-response error debe usar código 500 por defecto" name="http-response error debe usar código 500 por defecto" time="0.001">
    </testcase>
    <testcase classname="http-response badRequest debe retornar 400" name="http-response badRequest debe retornar 400" time="0.002">
    </testcase>
    <testcase classname="http-response notFound debe retornar 404" name="http-response notFound debe retornar 404" time="0.002">
    </testcase>
    <testcase classname="http-response unauthorized debe retornar 401" name="http-response unauthorized debe retornar 401" time="0.001">
    </testcase>
    <testcase classname="http-response forbidden debe retornar 403" name="http-response forbidden debe retornar 403" time="0.001">
    </testcase>
    <testcase classname="http-response conflict debe retornar 409" name="http-response conflict debe retornar 409" time="0.001">
    </testcase>
    <testcase classname="http-response created debe retornar 201" name="http-response created debe retornar 201" time="0.006">
    </testcase>
    <testcase classname="http-response noContent debe retornar 204" name="http-response noContent debe retornar 204" time="0.006">
    </testcase>
    <testcase classname="http-response paginated debe retornar respuesta paginada" name="http-response paginated debe retornar respuesta paginada" time="0.004">
    </testcase>
    <testcase classname="http-response json debe retornar JSON directo" name="http-response json debe retornar JSON directo" time="0.002">
    </testcase>
    <testcase classname="http-response createResponse debe crear respuesta con statusCode y datos" name="http-response createResponse debe crear respuesta con statusCode y datos" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="admin-biblioteca.controller - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:39" time="0.259" tests="8">
    <testcase classname="admin-biblioteca.controller - casos adicionales obtenerPrestamosBiblioteca - casos edge debe filtrar por estado=activos" name="admin-biblioteca.controller - casos adicionales obtenerPrestamosBiblioteca - casos edge debe filtrar por estado=activos" time="0.004">
    </testcase>
    <testcase classname="admin-biblioteca.controller - casos adicionales obtenerPrestamosBiblioteca - casos edge debe filtrar por estado=devueltos" name="admin-biblioteca.controller - casos adicionales obtenerPrestamosBiblioteca - casos edge debe filtrar por estado=devueltos" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller - casos adicionales obtenerPrestamosBiblioteca - casos edge debe filtrar por estado=vencidos" name="admin-biblioteca.controller - casos adicionales obtenerPrestamosBiblioteca - casos edge debe filtrar por estado=vencidos" time="0.004">
    </testcase>
    <testcase classname="admin-biblioteca.controller - casos adicionales obtenerPrestamosBiblioteca - casos edge debe manejar estado desconocido" name="admin-biblioteca.controller - casos adicionales obtenerPrestamosBiblioteca - casos edge debe manejar estado desconocido" time="0.007">
    </testcase>
    <testcase classname="admin-biblioteca.controller - casos adicionales marcarPrestamoDevuelto - casos edge debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller - casos adicionales marcarPrestamoDevuelto - casos edge debe retornar 404 si no hay biblioteca asignada" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller - casos adicionales marcarPrestamoDevuelto - casos edge debe retornar 400 si el préstamo ya fue devuelto" name="admin-biblioteca.controller - casos adicionales marcarPrestamoDevuelto - casos edge debe retornar 400 si el préstamo ya fue devuelto" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller - casos adicionales crearLibro - casos edge debe crear libro sin agregar a biblioteca si agregar_a_biblioteca=false" name="admin-biblioteca.controller - casos adicionales crearLibro - casos edge debe crear libro sin agregar a biblioteca si agregar_a_biblioteca=false" time="0.009">
    </testcase>
    <testcase classname="admin-biblioteca.controller - casos adicionales crearLibro - casos edge debe usar valores por defecto para campos opcionales" name="admin-biblioteca.controller - casos adicionales crearLibro - casos edge debe usar valores por defecto para campos opcionales" time="0.016">
    </testcase>
  </testsuite>
  <testsuite name="admin-biblioteca.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:38" time="0.384" tests="34">
    <testcase classname="admin-biblioteca.controller obtenerBibliotecaAsignada debe obtener la biblioteca asignada" name="admin-biblioteca.controller obtenerBibliotecaAsignada debe obtener la biblioteca asignada" time="0.004">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerBibliotecaAsignada debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller obtenerBibliotecaAsignada debe retornar 404 si no hay biblioteca asignada" time="0.008">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerBibliotecaAsignada debe manejar errores" name="admin-biblioteca.controller obtenerBibliotecaAsignada debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerEstadisticasBiblioteca debe obtener estadísticas de la biblioteca" name="admin-biblioteca.controller obtenerEstadisticasBiblioteca debe obtener estadísticas de la biblioteca" time="0.006">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerEstadisticasBiblioteca debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller obtenerEstadisticasBiblioteca debe retornar 404 si no hay biblioteca asignada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerEstadisticasBiblioteca debe manejar errores" name="admin-biblioteca.controller obtenerEstadisticasBiblioteca debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerLibrosBiblioteca debe obtener libros de la biblioteca" name="admin-biblioteca.controller obtenerLibrosBiblioteca debe obtener libros de la biblioteca" time="0.007">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerLibrosBiblioteca debe filtrar por término de búsqueda" name="admin-biblioteca.controller obtenerLibrosBiblioteca debe filtrar por término de búsqueda" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerLibrosBiblioteca debe filtrar por categoría" name="admin-biblioteca.controller obtenerLibrosBiblioteca debe filtrar por categoría" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerLibrosBiblioteca debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller obtenerLibrosBiblioteca debe retornar 404 si no hay biblioteca asignada" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerLibrosBiblioteca debe manejar errores" name="admin-biblioteca.controller obtenerLibrosBiblioteca debe manejar errores" time="0.003">
    </testcase>
    <testcase classname="admin-biblioteca.controller agregarLibroABiblioteca debe agregar libro a la biblioteca" name="admin-biblioteca.controller agregarLibroABiblioteca debe agregar libro a la biblioteca" time="0.003">
    </testcase>
    <testcase classname="admin-biblioteca.controller agregarLibroABiblioteca debe retornar 409 si el libro ya está en la biblioteca" name="admin-biblioteca.controller agregarLibroABiblioteca debe retornar 409 si el libro ya está en la biblioteca" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller agregarLibroABiblioteca debe retornar 404 si el libro no existe" name="admin-biblioteca.controller agregarLibroABiblioteca debe retornar 404 si el libro no existe" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller agregarLibroABiblioteca debe retornar 400 si falta libro_id" name="admin-biblioteca.controller agregarLibroABiblioteca debe retornar 400 si falta libro_id" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller agregarLibroABiblioteca debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller agregarLibroABiblioteca debe retornar 404 si no hay biblioteca asignada" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller agregarLibroABiblioteca debe manejar errores" name="admin-biblioteca.controller agregarLibroABiblioteca debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller removerLibroDeBiblioteca debe remover libro de la biblioteca" name="admin-biblioteca.controller removerLibroDeBiblioteca debe remover libro de la biblioteca" time="0.003">
    </testcase>
    <testcase classname="admin-biblioteca.controller removerLibroDeBiblioteca debe retornar 400 si tiene préstamos activos" name="admin-biblioteca.controller removerLibroDeBiblioteca debe retornar 400 si tiene préstamos activos" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller removerLibroDeBiblioteca debe retornar 404 si el libro no está en la biblioteca" name="admin-biblioteca.controller removerLibroDeBiblioteca debe retornar 404 si el libro no está en la biblioteca" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller removerLibroDeBiblioteca debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller removerLibroDeBiblioteca debe retornar 404 si no hay biblioteca asignada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller removerLibroDeBiblioteca debe manejar errores" name="admin-biblioteca.controller removerLibroDeBiblioteca debe manejar errores" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller crearLibro debe crear un libro exitosamente" name="admin-biblioteca.controller crearLibro debe crear un libro exitosamente" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller crearLibro debe retornar 400 si faltan campos requeridos" name="admin-biblioteca.controller crearLibro debe retornar 400 si faltan campos requeridos" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller crearLibro debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller crearLibro debe retornar 404 si no hay biblioteca asignada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller crearLibro debe manejar errores" name="admin-biblioteca.controller crearLibro debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerPrestamosBiblioteca debe obtener préstamos de la biblioteca" name="admin-biblioteca.controller obtenerPrestamosBiblioteca debe obtener préstamos de la biblioteca" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerPrestamosBiblioteca debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller obtenerPrestamosBiblioteca debe retornar 404 si no hay biblioteca asignada" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller obtenerPrestamosBiblioteca debe manejar errores" name="admin-biblioteca.controller obtenerPrestamosBiblioteca debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller marcarPrestamoDevuelto debe marcar préstamo como devuelto" name="admin-biblioteca.controller marcarPrestamoDevuelto debe marcar préstamo como devuelto" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller marcarPrestamoDevuelto debe retornar 400 si el préstamo ya fue devuelto" name="admin-biblioteca.controller marcarPrestamoDevuelto debe retornar 400 si el préstamo ya fue devuelto" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller marcarPrestamoDevuelto debe retornar 404 si no hay biblioteca asignada" name="admin-biblioteca.controller marcarPrestamoDevuelto debe retornar 404 si no hay biblioteca asignada" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller marcarPrestamoDevuelto debe retornar 404 si el préstamo no existe" name="admin-biblioteca.controller marcarPrestamoDevuelto debe retornar 404 si el préstamo no existe" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller marcarPrestamoDevuelto debe manejar errores" name="admin-biblioteca.controller marcarPrestamoDevuelto debe manejar errores" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="error-handler" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:39" time="0.289" tests="17">
    <testcase classname="error-handler getPostgresErrorMessage debe retornar mensaje para código conocido" name="error-handler getPostgresErrorMessage debe retornar mensaje para código conocido" time="0.003">
    </testcase>
    <testcase classname="error-handler getPostgresErrorMessage debe retornar mensaje por defecto para código desconocido" name="error-handler getPostgresErrorMessage debe retornar mensaje por defecto para código desconocido" time="0.002">
    </testcase>
    <testcase classname="error-handler getPostgresErrorMessage debe retornar mensaje por defecto para código inválido" name="error-handler getPostgresErrorMessage debe retornar mensaje por defecto para código inválido" time="0.001">
    </testcase>
    <testcase classname="error-handler getPostgresErrorStatusCode debe retornar código HTTP para código conocido" name="error-handler getPostgresErrorStatusCode debe retornar código HTTP para código conocido" time="0">
    </testcase>
    <testcase classname="error-handler getPostgresErrorStatusCode debe retornar 500 para código desconocido" name="error-handler getPostgresErrorStatusCode debe retornar 500 para código desconocido" time="0">
    </testcase>
    <testcase classname="error-handler validateResponse debe lanzar error si res no es válido" name="error-handler validateResponse debe lanzar error si res no es válido" time="0.035">
    </testcase>
    <testcase classname="error-handler validateResponse no debe lanzar error si res es válido" name="error-handler validateResponse no debe lanzar error si res es válido" time="0.001">
    </testcase>
    <testcase classname="error-handler validateError debe retornar el error si existe" name="error-handler validateError debe retornar el error si existe" time="0.003">
    </testcase>
    <testcase classname="error-handler validateError debe retornar nuevo error si no existe" name="error-handler validateError debe retornar nuevo error si no existe" time="0.001">
    </testcase>
    <testcase classname="error-handler handleError debe manejar errores de PostgreSQL" name="error-handler handleError debe manejar errores de PostgreSQL" time="0.005">
    </testcase>
    <testcase classname="error-handler handleError debe manejar errores genéricos" name="error-handler handleError debe manejar errores genéricos" time="0.001">
    </testcase>
    <testcase classname="error-handler handleError debe usar mensaje por defecto si no hay mensaje" name="error-handler handleError debe usar mensaje por defecto si no hay mensaje" time="0.001">
    </testcase>
    <testcase classname="error-handler asyncHandler debe envolver función async y manejar errores" name="error-handler asyncHandler debe envolver función async y manejar errores" time="0.001">
    </testcase>
    <testcase classname="error-handler asyncHandler debe ejecutar función exitosamente" name="error-handler asyncHandler debe ejecutar función exitosamente" time="0.002">
    </testcase>
    <testcase classname="error-handler promiseHandler debe manejar promesa exitosa" name="error-handler promiseHandler debe manejar promesa exitosa" time="0.002">
    </testcase>
    <testcase classname="error-handler promiseHandler debe manejar promesa rechazada" name="error-handler promiseHandler debe manejar promesa rechazada" time="0.004">
    </testcase>
    <testcase classname="error-handler promiseHandler debe lanzar error si no es promesa" name="error-handler promiseHandler debe lanzar error si no es promesa" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="register-security-headers - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:39" time="0.189" tests="9">
    <testcase classname="register-security-headers - cobertura completa debe registrar middleware de security headers" name="register-security-headers - cobertura completa debe registrar middleware de security headers" time="0.004">
    </testcase>
    <testcase classname="register-security-headers - cobertura completa Security headers middleware debe establecer X-Content-Type-Options" name="register-security-headers - cobertura completa Security headers middleware debe establecer X-Content-Type-Options" time="0.001">
    </testcase>
    <testcase classname="register-security-headers - cobertura completa Security headers middleware debe establecer X-Frame-Options" name="register-security-headers - cobertura completa Security headers middleware debe establecer X-Frame-Options" time="0">
    </testcase>
    <testcase classname="register-security-headers - cobertura completa Security headers middleware debe establecer X-XSS-Protection" name="register-security-headers - cobertura completa Security headers middleware debe establecer X-XSS-Protection" time="0">
    </testcase>
    <testcase classname="register-security-headers - cobertura completa Security headers middleware debe establecer Referrer-Policy" name="register-security-headers - cobertura completa Security headers middleware debe establecer Referrer-Policy" time="0.001">
    </testcase>
    <testcase classname="register-security-headers - cobertura completa Security headers middleware debe establecer Permissions-Policy" name="register-security-headers - cobertura completa Security headers middleware debe establecer Permissions-Policy" time="0.001">
    </testcase>
    <testcase classname="register-security-headers - cobertura completa Security headers middleware debe establecer Content-Security-Policy" name="register-security-headers - cobertura completa Security headers middleware debe establecer Content-Security-Policy" time="0.001">
    </testcase>
    <testcase classname="register-security-headers - cobertura completa Security headers middleware debe llamar next" name="register-security-headers - cobertura completa Security headers middleware debe llamar next" time="0.001">
    </testcase>
    <testcase classname="register-security-headers - cobertura completa buildContentSecurityPolicy debe construir CSP con todas las directivas" name="register-security-headers - cobertura completa buildContentSecurityPolicy debe construir CSP con todas las directivas" time="0.007">
    </testcase>
  </testsuite>
  <testsuite name="validation-helpers" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:39" time="0.306" tests="28">
    <testcase classname="validation-helpers createValidator debe crear un validador que retorna valid: true cuando la función retorna true" name="validation-helpers createValidator debe crear un validador que retorna valid: true cuando la función retorna true" time="0.002">
    </testcase>
    <testcase classname="validation-helpers createValidator debe crear un validador que retorna valid: false cuando la función retorna false" name="validation-helpers createValidator debe crear un validador que retorna valid: false cuando la función retorna false" time="0.001">
    </testcase>
    <testcase classname="validation-helpers createValidator debe manejar errores en la función validadora" name="validation-helpers createValidator debe manejar errores en la función validadora" time="0.001">
    </testcase>
    <testcase classname="validation-helpers createValidator debe aceptar un objeto con valid como resultado" name="validation-helpers createValidator debe aceptar un objeto con valid como resultado" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateRequired debe retornar valid: true cuando todos los campos están presentes" name="validation-helpers validateRequired debe retornar valid: true cuando todos los campos están presentes" time="0">
    </testcase>
    <testcase classname="validation-helpers validateRequired debe retornar valid: false cuando faltan campos" name="validation-helpers validateRequired debe retornar valid: false cuando faltan campos" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateRequired debe retornar error cuando fields no es un array" name="validation-helpers validateRequired debe retornar error cuando fields no es un array" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateRequired debe retornar error cuando data no es un objeto" name="validation-helpers validateRequired debe retornar error cuando data no es un objeto" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateRequired debe ignorar campos vacíos en la lista de campos" name="validation-helpers validateRequired debe ignorar campos vacíos en la lista de campos" time="0">
    </testcase>
    <testcase classname="validation-helpers requireFields debe llamar next() cuando todos los campos están presentes" name="validation-helpers requireFields debe llamar next() cuando todos los campos están presentes" time="0.001">
    </testcase>
    <testcase classname="validation-helpers requireFields debe retornar badRequest cuando faltan campos" name="validation-helpers requireFields debe retornar badRequest cuando faltan campos" time="0.002">
    </testcase>
    <testcase classname="validation-helpers requireFields debe retornar error cuando req.body no existe" name="validation-helpers requireFields debe retornar error cuando req.body no existe" time="0.001">
    </testcase>
    <testcase classname="validation-helpers isValidEmail debe validar emails correctos" name="validation-helpers isValidEmail debe validar emails correctos" time="0.002">
    </testcase>
    <testcase classname="validation-helpers isValidEmail debe rechazar emails inválidos" name="validation-helpers isValidEmail debe rechazar emails inválidos" time="0.001">
    </testcase>
    <testcase classname="validation-helpers isValidEmail debe rechazar valores no string" name="validation-helpers isValidEmail debe rechazar valores no string" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateEmail debe validar email y retornar null si es válido" name="validation-helpers validateEmail debe validar email y retornar null si es válido" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateEmail debe retornar badRequest si email es inválido" name="validation-helpers validateEmail debe retornar badRequest si email es inválido" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateEmail debe lanzar error si res no es válido" name="validation-helpers validateEmail debe lanzar error si res no es válido" time="0.043">
    </testcase>
    <testcase classname="validation-helpers validateEnum debe validar valores en enum" name="validation-helpers validateEnum debe validar valores en enum" time="0">
    </testcase>
    <testcase classname="validation-helpers validateEnum debe rechazar valores fuera del enum" name="validation-helpers validateEnum debe rechazar valores fuera del enum" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateEnum debe retornar error si allowedValues no es array" name="validation-helpers validateEnum debe retornar error si allowedValues no es array" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateRange debe validar números en rango" name="validation-helpers validateRange debe validar números en rango" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateRange debe rechazar números fuera de rango" name="validation-helpers validateRange debe rechazar números fuera de rango" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateRange debe retornar error si rango es inválido" name="validation-helpers validateRange debe retornar error si rango es inválido" time="0">
    </testcase>
    <testcase classname="validation-helpers validateRange debe validar strings numéricos" name="validation-helpers validateRange debe validar strings numéricos" time="0">
    </testcase>
    <testcase classname="validation-helpers validateId debe validar IDs numéricos válidos" name="validation-helpers validateId debe validar IDs numéricos válidos" time="0.001">
    </testcase>
    <testcase classname="validation-helpers validateId debe retornar badRequest para IDs inválidos" name="validation-helpers validateId debe retornar badRequest para IDs inválidos" time="0.002">
    </testcase>
    <testcase classname="validation-helpers validateId debe rechazar IDs negativos o cero" name="validation-helpers validateId debe rechazar IDs negativos o cero" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="register-rate-limiters" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:40" time="0.291" tests="1">
    <testcase classname="register-rate-limiters registerRateLimiters debe registrar rate limiters" name="register-rate-limiters registerRateLimiters debe registrar rate limiters" time="0.032">
    </testcase>
  </testsuite>
  <testsuite name="auth.controller - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:40" time="0.386" tests="7">
    <testcase classname="auth.controller - cobertura completa register - casos edge debe manejar error al obtener rol" name="auth.controller - cobertura completa register - casos edge debe manejar error al obtener rol" time="0.002">
    </testcase>
    <testcase classname="auth.controller - cobertura completa register - casos edge debe manejar error en inserción" name="auth.controller - cobertura completa register - casos edge debe manejar error en inserción" time="0.001">
    </testcase>
    <testcase classname="auth.controller - cobertura completa login - casos edge debe manejar error al verificar contraseña" name="auth.controller - cobertura completa login - casos edge debe manejar error al verificar contraseña" time="0.002">
    </testcase>
    <testcase classname="auth.controller - cobertura completa login - casos edge debe manejar error al generar token" name="auth.controller - cobertura completa login - casos edge debe manejar error al generar token" time="0.002">
    </testcase>
    <testcase classname="auth.controller - cobertura completa me - casos edge debe manejar error al obtener usuario" name="auth.controller - cobertura completa me - casos edge debe manejar error al obtener usuario" time="0.006">
    </testcase>
    <testcase classname="auth.controller - cobertura completa refresh - casos edge debe manejar error al obtener usuario" name="auth.controller - cobertura completa refresh - casos edge debe manejar error al obtener usuario" time="0.003">
    </testcase>
    <testcase classname="auth.controller - cobertura completa logout - casos edge debe manejar errores" name="auth.controller - cobertura completa logout - casos edge debe manejar errores" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="admin-biblioteca.controller - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:40" time="0.194" tests="6">
    <testcase classname="admin-biblioteca.controller - cobertura completa obtenerBibliotecaAsignada - casos edge debe manejar error de base de datos" name="admin-biblioteca.controller - cobertura completa obtenerBibliotecaAsignada - casos edge debe manejar error de base de datos" time="0.003">
    </testcase>
    <testcase classname="admin-biblioteca.controller - cobertura completa obtenerEstadisticasBiblioteca - casos edge debe manejar error de base de datos" name="admin-biblioteca.controller - cobertura completa obtenerEstadisticasBiblioteca - casos edge debe manejar error de base de datos" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller - cobertura completa obtenerLibrosBiblioteca - casos edge debe manejar error de base de datos" name="admin-biblioteca.controller - cobertura completa obtenerLibrosBiblioteca - casos edge debe manejar error de base de datos" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller - cobertura completa agregarLibroABiblioteca - casos edge debe manejar error de base de datos" name="admin-biblioteca.controller - cobertura completa agregarLibroABiblioteca - casos edge debe manejar error de base de datos" time="0.002">
    </testcase>
    <testcase classname="admin-biblioteca.controller - cobertura completa removerLibroDeBiblioteca - casos edge debe manejar error de base de datos" name="admin-biblioteca.controller - cobertura completa removerLibroDeBiblioteca - casos edge debe manejar error de base de datos" time="0.001">
    </testcase>
    <testcase classname="admin-biblioteca.controller - cobertura completa crearLibro - casos edge debe manejar error de base de datos" name="admin-biblioteca.controller - cobertura completa crearLibro - casos edge debe manejar error de base de datos" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="biblioteca-libros.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:40" time="0.285" tests="7">
    <testcase classname="biblioteca-libros.controller obtenerBibliotecaLibros debe obtener biblioteca-libros sin filtros" name="biblioteca-libros.controller obtenerBibliotecaLibros debe obtener biblioteca-libros sin filtros" time="0.004">
    </testcase>
    <testcase classname="biblioteca-libros.controller obtenerBibliotecaLibros debe filtrar por biblioteca_id" name="biblioteca-libros.controller obtenerBibliotecaLibros debe filtrar por biblioteca_id" time="0.004">
    </testcase>
    <testcase classname="biblioteca-libros.controller obtenerBibliotecaLibros debe filtrar por libro_id" name="biblioteca-libros.controller obtenerBibliotecaLibros debe filtrar por libro_id" time="0.004">
    </testcase>
    <testcase classname="biblioteca-libros.controller obtenerBibliotecaLibroPorId debe obtener biblioteca-libro por ID" name="biblioteca-libros.controller obtenerBibliotecaLibroPorId debe obtener biblioteca-libro por ID" time="0.002">
    </testcase>
    <testcase classname="biblioteca-libros.controller obtenerBibliotecaLibroPorId debe retornar 404 si no existe" name="biblioteca-libros.controller obtenerBibliotecaLibroPorId debe retornar 404 si no existe" time="0.001">
    </testcase>
    <testcase classname="biblioteca-libros.controller crearBibliotecaLibro debe crear biblioteca-libro exitosamente" name="biblioteca-libros.controller crearBibliotecaLibro debe crear biblioteca-libro exitosamente" time="0.002">
    </testcase>
    <testcase classname="biblioteca-libros.controller crearBibliotecaLibro debe retornar 400 si faltan campos" name="biblioteca-libros.controller crearBibliotecaLibro debe retornar 400 si faltan campos" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="cookie-utils" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:40" time="0.243" tests="19">
    <testcase classname="cookie-utils setSecureCookie debe establecer cookie con opciones por defecto" name="cookie-utils setSecureCookie debe establecer cookie con opciones por defecto" time="0.002">
    </testcase>
    <testcase classname="cookie-utils setSecureCookie debe establecer cookie en producción con secure=true" name="cookie-utils setSecureCookie debe establecer cookie en producción con secure=true" time="0.003">
    </testcase>
    <testcase classname="cookie-utils setSecureCookie debe usar dominio si está configurado" name="cookie-utils setSecureCookie debe usar dominio si está configurado" time="0.001">
    </testcase>
    <testcase classname="cookie-utils setSecureCookie debe sobrescribir opciones por defecto" name="cookie-utils setSecureCookie debe sobrescribir opciones por defecto" time="0.001">
    </testcase>
    <testcase classname="cookie-utils setSecureCookie debe truncar valores muy largos" name="cookie-utils setSecureCookie debe truncar valores muy largos" time="0.002">
    </testcase>
    <testcase classname="cookie-utils setSecureCookie debe manejar valores null o undefined" name="cookie-utils setSecureCookie debe manejar valores null o undefined" time="0.001">
    </testcase>
    <testcase classname="cookie-utils clearSecureCookie debe limpiar cookie con opciones correctas" name="cookie-utils clearSecureCookie debe limpiar cookie con opciones correctas" time="0.001">
    </testcase>
    <testcase classname="cookie-utils clearSecureCookie debe usar dominio si está configurado" name="cookie-utils clearSecureCookie debe usar dominio si está configurado" time="0.002">
    </testcase>
    <testcase classname="cookie-utils setAuthCookies debe establecer cookies de autenticación" name="cookie-utils setAuthCookies debe establecer cookies de autenticación" time="0.002">
    </testcase>
    <testcase classname="cookie-utils setAuthCookies debe retornar false si no hay token" name="cookie-utils setAuthCookies debe retornar false si no hay token" time="0.005">
    </testcase>
    <testcase classname="cookie-utils setAuthCookies debe usar remember para extender duración" name="cookie-utils setAuthCookies debe usar remember para extender duración" time="0.002">
    </testcase>
    <testcase classname="cookie-utils setAuthCookies debe manejar user con rol o role" name="cookie-utils setAuthCookies debe manejar user con rol o role" time="0.001">
    </testcase>
    <testcase classname="cookie-utils setAuthCookies debe manejar user con nombre o name" name="cookie-utils setAuthCookies debe manejar user con nombre o name" time="0.001">
    </testcase>
    <testcase classname="cookie-utils setAuthCookies debe establecer solo token si no hay user" name="cookie-utils setAuthCookies debe establecer solo token si no hay user" time="0.001">
    </testcase>
    <testcase classname="cookie-utils clearAuthCookies debe limpiar todas las cookies de autenticación" name="cookie-utils clearAuthCookies debe limpiar todas las cookies de autenticación" time="0.003">
    </testcase>
    <testcase classname="cookie-utils checkCookieStatus debe verificar estado de cookies cuando existen" name="cookie-utils checkCookieStatus debe verificar estado de cookies cuando existen" time="0.002">
    </testcase>
    <testcase classname="cookie-utils checkCookieStatus debe verificar estado cuando no hay cookies" name="cookie-utils checkCookieStatus debe verificar estado cuando no hay cookies" time="0.001">
    </testcase>
    <testcase classname="cookie-utils checkCookieStatus debe manejar req sin cookies" name="cookie-utils checkCookieStatus debe manejar req sin cookies" time="0.002">
    </testcase>
    <testcase classname="cookie-utils checkCookieStatus debe verificar estado parcial" name="cookie-utils checkCookieStatus debe verificar estado parcial" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="preferencias.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:40" time="0.352" tests="10">
    <testcase classname="preferencias.controller getPreferenciasMe debe obtener preferencias del usuario actual" name="preferencias.controller getPreferenciasMe debe obtener preferencias del usuario actual" time="0.003">
    </testcase>
    <testcase classname="preferencias.controller getPreferenciasMe debe crear preferencias por defecto si no existen" name="preferencias.controller getPreferenciasMe debe crear preferencias por defecto si no existen" time="0.001">
    </testcase>
    <testcase classname="preferencias.controller putPreferenciasMe debe actualizar preferencias del usuario actual" name="preferencias.controller putPreferenciasMe debe actualizar preferencias del usuario actual" time="0.002">
    </testcase>
    <testcase classname="preferencias.controller putPreferenciasMe debe retornar error si la validación falla" name="preferencias.controller putPreferenciasMe debe retornar error si la validación falla" time="0.009">
    </testcase>
    <testcase classname="preferencias.controller getPreferenciasById debe obtener preferencias por ID si es admin" name="preferencias.controller getPreferenciasById debe obtener preferencias por ID si es admin" time="0.002">
    </testcase>
    <testcase classname="preferencias.controller getPreferenciasById debe permitir al usuario ver sus propias preferencias" name="preferencias.controller getPreferenciasById debe permitir al usuario ver sus propias preferencias" time="0.006">
    </testcase>
    <testcase classname="preferencias.controller getPreferenciasById debe retornar 403 si no tiene permisos" name="preferencias.controller getPreferenciasById debe retornar 403 si no tiene permisos" time="0.002">
    </testcase>
    <testcase classname="preferencias.controller getPreferenciasById debe retornar 404 si las preferencias no existen" name="preferencias.controller getPreferenciasById debe retornar 404 si las preferencias no existen" time="0.001">
    </testcase>
    <testcase classname="preferencias.controller putPreferenciasById debe actualizar preferencias por ID si es admin" name="preferencias.controller putPreferenciasById debe actualizar preferencias por ID si es admin" time="0.005">
    </testcase>
    <testcase classname="preferencias.controller putPreferenciasById debe retornar 403 si no tiene permisos" name="preferencias.controller putPreferenciasById debe retornar 403 si no tiene permisos" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="libros.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:39" time="0.271" tests="21">
    <testcase classname="libros.controller obtenerLibros debe obtener lista de libros" name="libros.controller obtenerLibros debe obtener lista de libros" time="0.003">
    </testcase>
    <testcase classname="libros.controller obtenerLibros debe manejar errores de AppError" name="libros.controller obtenerLibros debe manejar errores de AppError" time="0.002">
    </testcase>
    <testcase classname="libros.controller obtenerLibros debe manejar errores de PostgreSQL 42P01" name="libros.controller obtenerLibros debe manejar errores de PostgreSQL 42P01" time="0.003">
    </testcase>
    <testcase classname="libros.controller obtenerLibros debe manejar errores de PostgreSQL 42703" name="libros.controller obtenerLibros debe manejar errores de PostgreSQL 42703" time="0.001">
    </testcase>
    <testcase classname="libros.controller obtenerLibros debe manejar errores genéricos" name="libros.controller obtenerLibros debe manejar errores genéricos" time="0.003">
    </testcase>
    <testcase classname="libros.controller obtenerLibroPorId debe obtener un libro por ID" name="libros.controller obtenerLibroPorId debe obtener un libro por ID" time="0.002">
    </testcase>
    <testcase classname="libros.controller obtenerLibroPorId debe retornar 404 si el libro no existe" name="libros.controller obtenerLibroPorId debe retornar 404 si el libro no existe" time="0.002">
    </testcase>
    <testcase classname="libros.controller obtenerLibroPorId debe manejar errores" name="libros.controller obtenerLibroPorId debe manejar errores" time="0.002">
    </testcase>
    <testcase classname="libros.controller crearLibro debe crear un libro exitosamente" name="libros.controller crearLibro debe crear un libro exitosamente" time="0.003">
    </testcase>
    <testcase classname="libros.controller crearLibro debe manejar errores de AppError" name="libros.controller crearLibro debe manejar errores de AppError" time="0.001">
    </testcase>
    <testcase classname="libros.controller crearLibro debe manejar errores genéricos" name="libros.controller crearLibro debe manejar errores genéricos" time="0.001">
    </testcase>
    <testcase classname="libros.controller actualizarLibro debe actualizar un libro exitosamente" name="libros.controller actualizarLibro debe actualizar un libro exitosamente" time="0.003">
    </testcase>
    <testcase classname="libros.controller actualizarLibro debe manejar errores" name="libros.controller actualizarLibro debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="libros.controller eliminarLibro debe eliminar un libro exitosamente" name="libros.controller eliminarLibro debe eliminar un libro exitosamente" time="0.003">
    </testcase>
    <testcase classname="libros.controller eliminarLibro debe manejar errores" name="libros.controller eliminarLibro debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="libros.controller subirImagenLibro debe retornar 400 si no hay archivo" name="libros.controller subirImagenLibro debe retornar 400 si no hay archivo" time="0.003">
    </testcase>
    <testcase classname="libros.controller subirImagenLibro debe subir imagen exitosamente" name="libros.controller subirImagenLibro debe subir imagen exitosamente" time="0.001">
    </testcase>
    <testcase classname="libros.controller subirImagenLibro debe manejar errores" name="libros.controller subirImagenLibro debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="libros.controller obtenerRecomendaciones debe obtener recomendaciones para usuario autenticado" name="libros.controller obtenerRecomendaciones debe obtener recomendaciones para usuario autenticado" time="0.004">
    </testcase>
    <testcase classname="libros.controller obtenerRecomendaciones debe obtener recomendaciones sin usuario" name="libros.controller obtenerRecomendaciones debe obtener recomendaciones sin usuario" time="0.002">
    </testcase>
    <testcase classname="libros.controller obtenerRecomendaciones debe manejar errores" name="libros.controller obtenerRecomendaciones debe manejar errores" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="usuarios.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:40" time="0.286" tests="21">
    <testcase classname="usuarios.controller obtenerUsuarios debe obtener todos los usuarios sin filtros" name="usuarios.controller obtenerUsuarios debe obtener todos los usuarios sin filtros" time="0.005">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarios debe filtrar por rol" name="usuarios.controller obtenerUsuarios debe filtrar por rol" time="0.002">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarios debe buscar por texto" name="usuarios.controller obtenerUsuarios debe buscar por texto" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarios debe manejar paginación" name="usuarios.controller obtenerUsuarios debe manejar paginación" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarios debe manejar errores" name="usuarios.controller obtenerUsuarios debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarioActual debe retornar error 401 si no hay usuario autenticado" name="usuarios.controller obtenerUsuarioActual debe retornar error 401 si no hay usuario autenticado" time="0.003">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarioActual debe obtener el usuario actual desde req.user" name="usuarios.controller obtenerUsuarioActual debe obtener el usuario actual desde req.user" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarioActual debe obtener el usuario actual desde req.userId" name="usuarios.controller obtenerUsuarioActual debe obtener el usuario actual desde req.userId" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarioActual debe manejar errores" name="usuarios.controller obtenerUsuarioActual debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarioPorId debe obtener un usuario por ID" name="usuarios.controller obtenerUsuarioPorId debe obtener un usuario por ID" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarioPorId debe retornar 404 si el usuario no existe" name="usuarios.controller obtenerUsuarioPorId debe retornar 404 si el usuario no existe" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller obtenerUsuarioPorId debe manejar errores" name="usuarios.controller obtenerUsuarioPorId debe manejar errores" time="0">
    </testcase>
    <testcase classname="usuarios.controller crearUsuario debe retornar error 400 si faltan campos obligatorios" name="usuarios.controller crearUsuario debe retornar error 400 si faltan campos obligatorios" time="0.003">
    </testcase>
    <testcase classname="usuarios.controller crearUsuario debe retornar error 400 si el email ya existe" name="usuarios.controller crearUsuario debe retornar error 400 si el email ya existe" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller crearUsuario debe crear un usuario exitosamente" name="usuarios.controller crearUsuario debe crear un usuario exitosamente" time="0.007">
    </testcase>
    <testcase classname="usuarios.controller crearUsuario debe manejar errores" name="usuarios.controller crearUsuario debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller loginUsuario debe retornar error 400 si faltan datos" name="usuarios.controller loginUsuario debe retornar error 400 si faltan datos" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller loginUsuario debe retornar error 401 si las credenciales son incorrectas" name="usuarios.controller loginUsuario debe retornar error 401 si las credenciales son incorrectas" time="0.006">
    </testcase>
    <testcase classname="usuarios.controller loginUsuario debe retornar error 401 si la contraseña es incorrecta" name="usuarios.controller loginUsuario debe retornar error 401 si la contraseña es incorrecta" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller loginUsuario debe hacer login exitoso y generar token" name="usuarios.controller loginUsuario debe hacer login exitoso y generar token" time="0.002">
    </testcase>
    <testcase classname="usuarios.controller loginUsuario debe manejar errores" name="usuarios.controller loginUsuario debe manejar errores" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="twofa.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.253" tests="16">
    <testcase classname="twofa.controller get2FAStatus debe obtener estado 2FA del usuario" name="twofa.controller get2FAStatus debe obtener estado 2FA del usuario" time="0.003">
    </testcase>
    <testcase classname="twofa.controller get2FAStatus debe retornar 404 si el usuario no existe" name="twofa.controller get2FAStatus debe retornar 404 si el usuario no existe" time="0.001">
    </testcase>
    <testcase classname="twofa.controller get2FAStatus debe manejar errores" name="twofa.controller get2FAStatus debe manejar errores" time="0.001">
    </testcase>
    <testcase classname="twofa.controller setup2FA debe configurar 2FA exitosamente" name="twofa.controller setup2FA debe configurar 2FA exitosamente" time="0.002">
    </testcase>
    <testcase classname="twofa.controller setup2FA debe retornar 401 si no hay usuario autenticado" name="twofa.controller setup2FA debe retornar 401 si no hay usuario autenticado" time="0.001">
    </testcase>
    <testcase classname="twofa.controller setup2FA debe retornar 404 si el usuario no existe" name="twofa.controller setup2FA debe retornar 404 si el usuario no existe" time="0.001">
    </testcase>
    <testcase classname="twofa.controller setup2FA debe retornar 500 si no se puede guardar el secreto" name="twofa.controller setup2FA debe retornar 500 si no se puede guardar el secreto" time="0.002">
    </testcase>
    <testcase classname="twofa.controller verify2FA debe verificar y activar 2FA exitosamente" name="twofa.controller verify2FA debe verificar y activar 2FA exitosamente" time="0.003">
    </testcase>
    <testcase classname="twofa.controller verify2FA debe retornar 400 si falta el código" name="twofa.controller verify2FA debe retornar 400 si falta el código" time="0.004">
    </testcase>
    <testcase classname="twofa.controller verify2FA debe retornar 400 si el código es inválido" name="twofa.controller verify2FA debe retornar 400 si el código es inválido" time="0.001">
    </testcase>
    <testcase classname="twofa.controller disable2FA debe desactivar 2FA exitosamente" name="twofa.controller disable2FA debe desactivar 2FA exitosamente" time="0.002">
    </testcase>
    <testcase classname="twofa.controller disable2FA debe retornar 404 si el usuario no existe" name="twofa.controller disable2FA debe retornar 404 si el usuario no existe" time="0">
    </testcase>
    <testcase classname="twofa.controller verify2FALogin debe verificar código 2FA en login exitosamente" name="twofa.controller verify2FALogin debe verificar código 2FA en login exitosamente" time="0.004">
    </testcase>
    <testcase classname="twofa.controller verify2FALogin debe retornar 400 si faltan parámetros" name="twofa.controller verify2FALogin debe retornar 400 si faltan parámetros" time="0.001">
    </testcase>
    <testcase classname="twofa.controller verify2FALogin debe retornar 401 si el token es inválido" name="twofa.controller verify2FALogin debe retornar 401 si el token es inválido" time="0.001">
    </testcase>
    <testcase classname="twofa.controller generatePending2FAToken debe generar token pendiente de 2FA" name="twofa.controller generatePending2FAToken debe generar token pendiente de 2FA" time="0.01">
    </testcase>
  </testsuite>
  <testsuite name="prestamos.controller - casos adicionales 2" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.296" tests="10">
    <testcase classname="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe retornar 401 si no está autenticado" name="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe retornar 401 si no está autenticado" time="0.003">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe retornar 404 si el libro no existe" name="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe retornar 404 si el libro no existe" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe retornar 409 si el libro no está disponible" name="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe retornar 409 si el libro no está disponible" time="0">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe retornar 409 si ya tiene préstamo activo del mismo libro" name="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe retornar 409 si ya tiene préstamo activo del mismo libro" time="0">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe usar fecha_prestamo del body si se proporciona" name="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe usar fecha_prestamo del body si se proporciona" time="0.002">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe hacer rollback en caso de error" name="prestamos.controller - casos adicionales 2 crearPrestamo - casos edge debe hacer rollback en caso de error" time="0.003">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 marcarDevolucion - casos edge debe retornar 403 si no es el propietario ni admin" name="prestamos.controller - casos adicionales 2 marcarDevolucion - casos edge debe retornar 403 si no es el propietario ni admin" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 marcarDevolucion - casos edge debe permitir a admin devolver cualquier préstamo" name="prestamos.controller - casos adicionales 2 marcarDevolucion - casos edge debe permitir a admin devolver cualquier préstamo" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 renovarPrestamo - casos edge debe retornar 403 si no es el propietario" name="prestamos.controller - casos adicionales 2 renovarPrestamo - casos edge debe retornar 403 si no es el propietario" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales 2 renovarPrestamo - casos edge debe retornar 400 si el préstamo está vencido" name="prestamos.controller - casos adicionales 2 renovarPrestamo - casos edge debe retornar 400 si el préstamo está vencido" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="preferencias-helpers - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.293" tests="12">
    <testcase classname="preferencias-helpers - casos adicionales validatePreferences - casos edge debe validar todos los idiomas permitidos" name="preferencias-helpers - casos adicionales validatePreferences - casos edge debe validar todos los idiomas permitidos" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales validatePreferences - casos edge debe validar todos los temas permitidos" name="preferencias-helpers - casos adicionales validatePreferences - casos edge debe validar todos los temas permitidos" time="0">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales validatePreferences - casos edge debe validar todos los tamaños de fuente permitidos" name="preferencias-helpers - casos adicionales validatePreferences - casos edge debe validar todos los tamaños de fuente permitidos" time="0">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales validatePreferences - casos edge debe validar todos los maxResultados permitidos" name="preferencias-helpers - casos adicionales validatePreferences - casos edge debe validar todos los maxResultados permitidos" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales validatePreferences - casos edge debe retornar valid: true si no hay preferencias" name="preferencias-helpers - casos adicionales validatePreferences - casos edge debe retornar valid: true si no hay preferencias" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales getPreferencesByUserId debe retornar null si no hay preferencias" name="preferencias-helpers - casos adicionales getPreferencesByUserId debe retornar null si no hay preferencias" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales getPreferencesByUserId debe retornar preferencias si existen" name="preferencias-helpers - casos adicionales getPreferencesByUserId debe retornar preferencias si existen" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales createDefaultPreferences debe crear preferencias con valores por defecto" name="preferencias-helpers - casos adicionales createDefaultPreferences debe crear preferencias con valores por defecto" time="0.002">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales upsertPreferences - casos edge debe crear preferencias si no existen" name="preferencias-helpers - casos adicionales upsertPreferences - casos edge debe crear preferencias si no existen" time="0.002">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales upsertPreferences - casos edge debe actualizar preferencias si existen" name="preferencias-helpers - casos adicionales upsertPreferences - casos edge debe actualizar preferencias si existen" time="0.01">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales upsertPreferences - casos edge debe usar valores por defecto para campos faltantes en insert" name="preferencias-helpers - casos adicionales upsertPreferences - casos edge debe usar valores por defecto para campos faltantes en insert" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers - casos adicionales upsertPreferences - casos edge debe usar nullish coalescing para booleanos" name="preferencias-helpers - casos adicionales upsertPreferences - casos edge debe usar nullish coalescing para booleanos" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="bibliotecas.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.29" tests="6">
    <testcase classname="bibliotecas.controller obtenerBibliotecas debe obtener todas las bibliotecas sin filtros" name="bibliotecas.controller obtenerBibliotecas debe obtener todas las bibliotecas sin filtros" time="0.003">
    </testcase>
    <testcase classname="bibliotecas.controller obtenerBibliotecas debe filtrar por término de búsqueda" name="bibliotecas.controller obtenerBibliotecas debe filtrar por término de búsqueda" time="0.002">
    </testcase>
    <testcase classname="bibliotecas.controller obtenerBibliotecas debe filtrar por colegio_id" name="bibliotecas.controller obtenerBibliotecas debe filtrar por colegio_id" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.controller obtenerBibliotecas debe manejar paginación" name="bibliotecas.controller obtenerBibliotecas debe manejar paginación" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.controller obtenerBibliotecas debe limitar el límite máximo a 100" name="bibliotecas.controller obtenerBibliotecas debe limitar el límite máximo a 100" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.controller obtenerBibliotecas debe manejar errores" name="bibliotecas.controller obtenerBibliotecas debe manejar errores" time="0.057">
    </testcase>
  </testsuite>
  <testsuite name="app-error" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.229" tests="4">
    <testcase classname="app-error constructor debe crear instancia con mensaje y statusCode" name="app-error constructor debe crear instancia con mensaje y statusCode" time="0.002">
    </testcase>
    <testcase classname="app-error constructor debe crear instancia con details" name="app-error constructor debe crear instancia con details" time="0.001">
    </testcase>
    <testcase classname="app-error constructor debe crear instancia sin details" name="app-error constructor debe crear instancia sin details" time="0">
    </testcase>
    <testcase classname="app-error constructor debe tener stack trace" name="app-error constructor debe tener stack trace" time="0.023">
    </testcase>
  </testsuite>
  <testsuite name="prestamos.controller - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.261" tests="5">
    <testcase classname="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe filtrar por activo=false" name="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe filtrar por activo=false" time="0.003">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe filtrar por fecha_desde" name="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe filtrar por fecha_desde" time="0.001">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe filtrar por fecha_hasta" name="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe filtrar por fecha_hasta" time="0">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe filtrar por múltiples filtros" name="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe filtrar por múltiples filtros" time="0">
    </testcase>
    <testcase classname="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe manejar errores" name="prestamos.controller - casos adicionales buildPrestamosFilters - casos edge debe manejar errores" time="0">
    </testcase>
  </testsuite>
  <testsuite name="bibliotecas.controller - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.2" tests="5">
    <testcase classname="bibliotecas.controller - casos adicionales actualizarBiblioteca - casos edge debe manejar error de foreign key" name="bibliotecas.controller - casos adicionales actualizarBiblioteca - casos edge debe manejar error de foreign key" time="0.002">
    </testcase>
    <testcase classname="bibliotecas.controller - casos adicionales actualizarBiblioteca - casos edge debe manejar colegio_id null" name="bibliotecas.controller - casos adicionales actualizarBiblioteca - casos edge debe manejar colegio_id null" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.controller - casos adicionales eliminarBiblioteca - casos edge debe retornar 409 si tiene libros asociados" name="bibliotecas.controller - casos adicionales eliminarBiblioteca - casos edge debe retornar 409 si tiene libros asociados" time="0.009">
    </testcase>
    <testcase classname="bibliotecas.controller - casos adicionales eliminarBiblioteca - casos edge debe retornar 404 si la biblioteca no existe" name="bibliotecas.controller - casos adicionales eliminarBiblioteca - casos edge debe retornar 404 si la biblioteca no existe" time="0.001">
    </testcase>
    <testcase classname="bibliotecas.controller - casos adicionales eliminarBiblioteca - casos edge debe manejar errores en transacción" name="bibliotecas.controller - casos adicionales eliminarBiblioteca - casos edge debe manejar errores en transacción" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="colegios.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.205" tests="5">
    <testcase classname="colegios.controller obtenerColegios debe obtener colegios sin filtros" name="colegios.controller obtenerColegios debe obtener colegios sin filtros" time="0.006">
    </testcase>
    <testcase classname="colegios.controller obtenerColegios debe filtrar por nombre" name="colegios.controller obtenerColegios debe filtrar por nombre" time="0.001">
    </testcase>
    <testcase classname="colegios.controller obtenerColegioPorId debe obtener colegio por ID" name="colegios.controller obtenerColegioPorId debe obtener colegio por ID" time="0.001">
    </testcase>
    <testcase classname="colegios.controller obtenerColegioPorId debe retornar 404 si no existe" name="colegios.controller obtenerColegioPorId debe retornar 404 si no existe" time="0.001">
    </testcase>
    <testcase classname="colegios.controller crearColegio debe exportar la función crearColegio" name="colegios.controller crearColegio debe exportar la función crearColegio" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="twofa.controller - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.274" tests="8">
    <testcase classname="twofa.controller - cobertura completa get2FAStatus - casos edge debe usar req.auth.sub si está disponible" name="twofa.controller - cobertura completa get2FAStatus - casos edge debe usar req.auth.sub si está disponible" time="0.003">
    </testcase>
    <testcase classname="twofa.controller - cobertura completa get2FAStatus - casos edge debe usar req.user.id si req.auth no está disponible" name="twofa.controller - cobertura completa get2FAStatus - casos edge debe usar req.user.id si req.auth no está disponible" time="0.001">
    </testcase>
    <testcase classname="twofa.controller - cobertura completa setup2FA - casos edge debe manejar error al generar QR" name="twofa.controller - cobertura completa setup2FA - casos edge debe manejar error al generar QR" time="0.001">
    </testcase>
    <testcase classname="twofa.controller - cobertura completa setup2FA - casos edge debe usar nombre si email no está disponible" name="twofa.controller - cobertura completa setup2FA - casos edge debe usar nombre si email no está disponible" time="0.001">
    </testcase>
    <testcase classname="twofa.controller - cobertura completa verify2FA - casos edge debe manejar error al verificar código" name="twofa.controller - cobertura completa verify2FA - casos edge debe manejar error al verificar código" time="0.002">
    </testcase>
    <testcase classname="twofa.controller - cobertura completa disable2FA - casos edge debe manejar error al desactivar" name="twofa.controller - cobertura completa disable2FA - casos edge debe manejar error al desactivar" time="0.004">
    </testcase>
    <testcase classname="twofa.controller - cobertura completa verify2FALogin - casos edge debe manejar error al obtener rol" name="twofa.controller - cobertura completa verify2FALogin - casos edge debe manejar error al obtener rol" time="0.002">
    </testcase>
    <testcase classname="twofa.controller - cobertura completa generatePending2FAToken debe generar token con sub y twofa" name="twofa.controller - cobertura completa generatePending2FAToken debe generar token con sub y twofa" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="roles.controller" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.18" tests="4">
    <testcase classname="roles.controller debe exportar obtenerRoles" name="roles.controller debe exportar obtenerRoles" time="0.002">
    </testcase>
    <testcase classname="roles.controller debe exportar obtenerRolPorId" name="roles.controller debe exportar obtenerRolPorId" time="0">
    </testcase>
    <testcase classname="roles.controller debe usar getAllRecords para obtenerRoles" name="roles.controller debe usar getAllRecords para obtenerRoles" time="0.003">
    </testcase>
    <testcase classname="roles.controller debe usar getRecordById para obtenerRolPorId" name="roles.controller debe usar getRecordById para obtenerRolPorId" time="0">
    </testcase>
  </testsuite>
  <testsuite name="usuarios.controller - casos completos" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.243" tests="4">
    <testcase classname="usuarios.controller - casos completos eliminarUsuarioCompleto - casos de error debe manejar error de foreign key constraint" name="usuarios.controller - casos completos eliminarUsuarioCompleto - casos de error debe manejar error de foreign key constraint" time="0.004">
    </testcase>
    <testcase classname="usuarios.controller - casos completos eliminarUsuarioCompleto - casos de error debe manejar error de not null constraint" name="usuarios.controller - casos completos eliminarUsuarioCompleto - casos de error debe manejar error de not null constraint" time="0.002">
    </testcase>
    <testcase classname="usuarios.controller - casos completos eliminarUsuarioCompleto - casos de error debe manejar error de unique constraint" name="usuarios.controller - casos completos eliminarUsuarioCompleto - casos de error debe manejar error de unique constraint" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller - casos completos eliminarUsuarioCompleto - casos de error debe manejar error general" name="usuarios.controller - casos completos eliminarUsuarioCompleto - casos de error debe manejar error general" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="simple-jwt - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.291" tests="5">
    <testcase classname="simple-jwt - casos adicionales generateToken - casos edge debe usar variables de entorno si están configuradas" name="simple-jwt - casos adicionales generateToken - casos edge debe usar variables de entorno si están configuradas" time="0.002">
    </testcase>
    <testcase classname="simple-jwt - casos adicionales generateToken - casos edge debe sobrescribir opciones por defecto" name="simple-jwt - casos adicionales generateToken - casos edge debe sobrescribir opciones por defecto" time="0.003">
    </testcase>
    <testcase classname="simple-jwt - casos adicionales verifyToken - casos edge debe usar variables de entorno para verificación" name="simple-jwt - casos adicionales verifyToken - casos edge debe usar variables de entorno para verificación" time="0.002">
    </testcase>
    <testcase classname="simple-jwt - casos adicionales verifyToken - casos edge debe lanzar error genérico si la verificación falla" name="simple-jwt - casos adicionales verifyToken - casos edge debe lanzar error genérico si la verificación falla" time="0.039">
    </testcase>
    <testcase classname="simple-jwt - casos adicionales decodeToken debe decodificar token sin verificar" name="simple-jwt - casos adicionales decodeToken debe decodificar token sin verificar" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="middleware/auth" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.225" tests="9">
    <testcase classname="middleware/auth auth debe retornar 401 si no hay token" name="middleware/auth auth debe retornar 401 si no hay token" time="0.008">
    </testcase>
    <testcase classname="middleware/auth auth debe autenticar correctamente con token válido" name="middleware/auth auth debe autenticar correctamente con token válido" time="0.002">
    </testcase>
    <testcase classname="middleware/auth auth debe manejar errores de token expirado" name="middleware/auth auth debe manejar errores de token expirado" time="0.003">
    </testcase>
    <testcase classname="middleware/auth auth debe manejar errores de token inválido" name="middleware/auth auth debe manejar errores de token inválido" time="0">
    </testcase>
    <testcase classname="middleware/auth auth debe manejar errores del servidor" name="middleware/auth auth debe manejar errores del servidor" time="0.001">
    </testcase>
    <testcase classname="middleware/auth requireRole debe re-exportar requireRole de auth-middleware-helpers" name="middleware/auth requireRole debe re-exportar requireRole de auth-middleware-helpers" time="0.001">
    </testcase>
    <testcase classname="middleware/auth requireAnyRole debe re-exportar requireAnyRole de auth-middleware-helpers" name="middleware/auth requireAnyRole debe re-exportar requireAnyRole de auth-middleware-helpers" time="0.001">
    </testcase>
    <testcase classname="middleware/auth requireOwnershipOrAdmin debe re-exportar requireOwnershipOrAdmin de auth-middleware-helpers" name="middleware/auth requireOwnershipOrAdmin debe re-exportar requireOwnershipOrAdmin de auth-middleware-helpers" time="0.001">
    </testcase>
    <testcase classname="middleware/auth checkPermission debe re-exportar checkPermission de auth-middleware-helpers" name="middleware/auth checkPermission debe re-exportar checkPermission de auth-middleware-helpers" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="libros.routes - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.234" tests="11">
    <testcase classname="libros.routes - cobertura completa GET /test-db debe retornar timestamp de base de datos" name="libros.routes - cobertura completa GET /test-db debe retornar timestamp de base de datos" time="0.002">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET /test-db debe manejar error de conexión" name="libros.routes - cobertura completa GET /test-db debe manejar error de conexión" time="0.001">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET /test-table debe retornar información de tabla" name="libros.routes - cobertura completa GET /test-table debe retornar información de tabla" time="0.013">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET /test-table debe manejar error al verificar tabla" name="libros.routes - cobertura completa GET /test-table debe manejar error al verificar tabla" time="0.001">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET / debe retornar lista de libros" name="libros.routes - cobertura completa GET / debe retornar lista de libros" time="0.001">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET / debe manejar error al obtener libros" name="libros.routes - cobertura completa GET / debe manejar error al obtener libros" time="0.006">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET /:id debe retornar libro por ID" name="libros.routes - cobertura completa GET /:id debe retornar libro por ID" time="0.001">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET /:id debe retornar 400 si ID es inválido" name="libros.routes - cobertura completa GET /:id debe retornar 400 si ID es inválido" time="0.001">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET /:id debe retornar 400 si ID es negativo" name="libros.routes - cobertura completa GET /:id debe retornar 400 si ID es negativo" time="0.001">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET /:id debe retornar 404 si libro no existe" name="libros.routes - cobertura completa GET /:id debe retornar 404 si libro no existe" time="0">
    </testcase>
    <testcase classname="libros.routes - cobertura completa GET /:id debe manejar error al obtener libro" name="libros.routes - cobertura completa GET /:id debe manejar error al obtener libro" time="0">
    </testcase>
  </testsuite>
  <testsuite name="middleware/security" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:41" time="0.265" tests="15">
    <testcase classname="middleware/security authRateLimit debe crear un rate limiter para autenticación" name="middleware/security authRateLimit debe crear un rate limiter para autenticación" time="0.001">
    </testcase>
    <testcase classname="middleware/security apiRateLimit debe crear un rate limiter para API general" name="middleware/security apiRateLimit debe crear un rate limiter para API general" time="0.003">
    </testcase>
    <testcase classname="middleware/security sensitiveRateLimit debe crear un rate limiter para endpoints sensibles" name="middleware/security sensitiveRateLimit debe crear un rate limiter para endpoints sensibles" time="0.003">
    </testcase>
    <testcase classname="middleware/security helmetConfig debe configurar helmet con opciones de seguridad" name="middleware/security helmetConfig debe configurar helmet con opciones de seguridad" time="0.002">
    </testcase>
    <testcase classname="middleware/security securityLogger debe continuar sin problemas para requests normales" name="middleware/security securityLogger debe continuar sin problemas para requests normales" time="0.003">
    </testcase>
    <testcase classname="middleware/security securityLogger debe detectar path traversal" name="middleware/security securityLogger debe detectar path traversal" time="0.001">
    </testcase>
    <testcase classname="middleware/security securityLogger debe detectar intentos de XSS" name="middleware/security securityLogger debe detectar intentos de XSS" time="0.001">
    </testcase>
    <testcase classname="middleware/security securityLogger debe detectar SQL injection" name="middleware/security securityLogger debe detectar SQL injection" time="0.001">
    </testcase>
    <testcase classname="middleware/security securityLogger debe detectar JavaScript injection" name="middleware/security securityLogger debe detectar JavaScript injection" time="0.003">
    </testcase>
    <testcase classname="middleware/security securityLogger debe loggear requests de autenticación" name="middleware/security securityLogger debe loggear requests de autenticación" time="0.001">
    </testcase>
    <testcase classname="middleware/security inputValidator debe sanitizar strings en el body" name="middleware/security inputValidator debe sanitizar strings en el body" time="0.002">
    </testcase>
    <testcase classname="middleware/security inputValidator debe sanitizar strings en el query" name="middleware/security inputValidator debe sanitizar strings en el query" time="0.001">
    </testcase>
    <testcase classname="middleware/security inputValidator debe manejar valores no string sin modificar" name="middleware/security inputValidator debe manejar valores no string sin modificar" time="0.001">
    </testcase>
    <testcase classname="middleware/security inputValidator debe hacer trim de espacios" name="middleware/security inputValidator debe hacer trim de espacios" time="0.001">
    </testcase>
    <testcase classname="middleware/security inputValidator debe manejar body y query vacíos" name="middleware/security inputValidator debe manejar body y query vacíos" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="register-security-headers" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.193" tests="1">
    <testcase classname="register-security-headers registerSecurityHeaders debe registrar headers de seguridad" name="register-security-headers registerSecurityHeaders debe registrar headers de seguridad" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="preferencias-helpers" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.218" tests="13">
    <testcase classname="preferencias-helpers DEFAULT_PREFERENCES debe tener valores por defecto correctos" name="preferencias-helpers DEFAULT_PREFERENCES debe tener valores por defecto correctos" time="0.012">
    </testcase>
    <testcase classname="preferencias-helpers validatePreferences debe validar preferencias válidas" name="preferencias-helpers validatePreferences debe validar preferencias válidas" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers validatePreferences debe rechazar idioma inválido" name="preferencias-helpers validatePreferences debe rechazar idioma inválido" time="0">
    </testcase>
    <testcase classname="preferencias-helpers validatePreferences debe rechazar tema inválido" name="preferencias-helpers validatePreferences debe rechazar tema inválido" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers validatePreferences debe rechazar tamaño de fuente inválido" name="preferencias-helpers validatePreferences debe rechazar tamaño de fuente inválido" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers validatePreferences debe rechazar máximo de resultados inválido" name="preferencias-helpers validatePreferences debe rechazar máximo de resultados inválido" time="0">
    </testcase>
    <testcase classname="preferencias-helpers validatePreferences debe aceptar preferencias parciales" name="preferencias-helpers validatePreferences debe aceptar preferencias parciales" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers getPreferencesByUserId debe retornar preferencias si existen" name="preferencias-helpers getPreferencesByUserId debe retornar preferencias si existen" time="0.004">
    </testcase>
    <testcase classname="preferencias-helpers getPreferencesByUserId debe retornar null si no existen preferencias" name="preferencias-helpers getPreferencesByUserId debe retornar null si no existen preferencias" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers createDefaultPreferences debe crear preferencias por defecto" name="preferencias-helpers createDefaultPreferences debe crear preferencias por defecto" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers upsertPreferences debe crear nuevas preferencias si no existen" name="preferencias-helpers upsertPreferences debe crear nuevas preferencias si no existen" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers upsertPreferences debe actualizar preferencias existentes" name="preferencias-helpers upsertPreferences debe actualizar preferencias existentes" time="0.001">
    </testcase>
    <testcase classname="preferencias-helpers upsertPreferences debe usar valores por defecto con nullish coalescing" name="preferencias-helpers upsertPreferences debe usar valores por defecto con nullish coalescing" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="http-response - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.205" tests="18">
    <testcase classname="http-response - casos adicionales success - casos edge debe manejar data null" name="http-response - casos adicionales success - casos edge debe manejar data null" time="0.002">
    </testcase>
    <testcase classname="http-response - casos adicionales success - casos edge debe manejar message vacío" name="http-response - casos adicionales success - casos edge debe manejar message vacío" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales success - casos edge debe manejar message con espacios" name="http-response - casos adicionales success - casos edge debe manejar message con espacios" time="0">
    </testcase>
    <testcase classname="http-response - casos adicionales success - casos edge debe manejar statusCode personalizado" name="http-response - casos adicionales success - casos edge debe manejar statusCode personalizado" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales error - casos edge debe manejar details null" name="http-response - casos adicionales error - casos edge debe manejar details null" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales error - casos edge debe manejar details undefined" name="http-response - casos adicionales error - casos edge debe manejar details undefined" time="0.002">
    </testcase>
    <testcase classname="http-response - casos adicionales notFound - casos edge debe manejar resource vacío" name="http-response - casos adicionales notFound - casos edge debe manejar resource vacío" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales notFound - casos edge debe manejar resource con espacios" name="http-response - casos adicionales notFound - casos edge debe manejar resource con espacios" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales paginated - casos edge debe manejar data no array" name="http-response - casos adicionales paginated - casos edge debe manejar data no array" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales paginated - casos edge debe manejar total negativo" name="http-response - casos adicionales paginated - casos edge debe manejar total negativo" time="0.005">
    </testcase>
    <testcase classname="http-response - casos adicionales paginated - casos edge debe manejar limit negativo" name="http-response - casos adicionales paginated - casos edge debe manejar limit negativo" time="0.007">
    </testcase>
    <testcase classname="http-response - casos adicionales paginated - casos edge debe manejar offset negativo" name="http-response - casos adicionales paginated - casos edge debe manejar offset negativo" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales paginated - casos edge debe manejar valores decimales" name="http-response - casos adicionales paginated - casos edge debe manejar valores decimales" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales paginated - casos edge debe manejar statusCode personalizado" name="http-response - casos adicionales paginated - casos edge debe manejar statusCode personalizado" time="0">
    </testcase>
    <testcase classname="http-response - casos adicionales validateMessage - casos edge debe manejar mensaje con solo espacios" name="http-response - casos adicionales validateMessage - casos edge debe manejar mensaje con solo espacios" time="0">
    </testcase>
    <testcase classname="http-response - casos adicionales validateMessage - casos edge debe manejar mensaje undefined" name="http-response - casos adicionales validateMessage - casos edge debe manejar mensaje undefined" time="0.001">
    </testcase>
    <testcase classname="http-response - casos adicionales validateStatusCode - casos edge debe manejar códigos en límites" name="http-response - casos adicionales validateStatusCode - casos edge debe manejar códigos en límites" time="0.006">
    </testcase>
    <testcase classname="http-response - casos adicionales validateStatusCode - casos edge debe manejar códigos fuera de límites" name="http-response - casos adicionales validateStatusCode - casos edge debe manejar códigos fuera de límites" time="0">
    </testcase>
  </testsuite>
  <testsuite name="usuarios.controller - funciones adicionales 2" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.239" tests="5">
    <testcase classname="usuarios.controller - funciones adicionales 2 actualizarUsuario debe actualizar usuario exitosamente" name="usuarios.controller - funciones adicionales 2 actualizarUsuario debe actualizar usuario exitosamente" time="0.012">
    </testcase>
    <testcase classname="usuarios.controller - funciones adicionales 2 actualizarUsuario debe retornar 404 si el usuario no existe" name="usuarios.controller - funciones adicionales 2 actualizarUsuario debe retornar 404 si el usuario no existe" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller - funciones adicionales 2 eliminarUsuario debe eliminar usuario exitosamente" name="usuarios.controller - funciones adicionales 2 eliminarUsuario debe eliminar usuario exitosamente" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller - funciones adicionales 2 eliminarUsuario debe retornar 404 si el usuario no existe" name="usuarios.controller - funciones adicionales 2 eliminarUsuario debe retornar 404 si el usuario no existe" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller - funciones adicionales 2 eliminarUsuario debe retornar 400 si tiene préstamos activos" name="usuarios.controller - funciones adicionales 2 eliminarUsuario debe retornar 400 si tiene préstamos activos" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="controller-helpers" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.247" tests="7">
    <testcase classname="controller-helpers getAllRecords debe obtener todos los registros de una tabla" name="controller-helpers getAllRecords debe obtener todos los registros de una tabla" time="0.003">
    </testcase>
    <testcase classname="controller-helpers getAllRecords debe usar campos personalizados" name="controller-helpers getAllRecords debe usar campos personalizados" time="0.007">
    </testcase>
    <testcase classname="controller-helpers getRecordById debe obtener un registro por ID" name="controller-helpers getRecordById debe obtener un registro por ID" time="0.003">
    </testcase>
    <testcase classname="controller-helpers getRecordById debe retornar notFound si no existe el registro" name="controller-helpers getRecordById debe retornar notFound si no existe el registro" time="0.002">
    </testcase>
    <testcase classname="controller-helpers getRecordById debe usar campo ID personalizado" name="controller-helpers getRecordById debe usar campo ID personalizado" time="0.001">
    </testcase>
    <testcase classname="controller-helpers createCrudController debe crear un controlador CRUD con opciones por defecto" name="controller-helpers createCrudController debe crear un controlador CRUD con opciones por defecto" time="0.002">
    </testcase>
    <testcase classname="controller-helpers createCrudController debe usar opciones personalizadas" name="controller-helpers createCrudController debe usar opciones personalizadas" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="usuarios.db" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.279" tests="9">
    <testcase classname="usuarios.db getById debe obtener usuario por ID" name="usuarios.db getById debe obtener usuario por ID" time="0.002">
    </testcase>
    <testcase classname="usuarios.db getById debe retornar null si usuario no existe" name="usuarios.db getById debe retornar null si usuario no existe" time="0.001">
    </testcase>
    <testcase classname="usuarios.db getById debe inicializar preferencias como objeto vacío si es null" name="usuarios.db getById debe inicializar preferencias como objeto vacío si es null" time="0.002">
    </testcase>
    <testcase classname="usuarios.db getById debe manejar errores" name="usuarios.db getById debe manejar errores" time="0.037">
    </testcase>
    <testcase classname="usuarios.db getByEmail debe obtener usuario por email" name="usuarios.db getByEmail debe obtener usuario por email" time="0.005">
    </testcase>
    <testcase classname="usuarios.db getByEmail debe retornar null si usuario no existe" name="usuarios.db getByEmail debe retornar null si usuario no existe" time="0.001">
    </testcase>
    <testcase classname="usuarios.db saveTwoFASecret debe guardar secreto 2FA" name="usuarios.db saveTwoFASecret debe guardar secreto 2FA" time="0.001">
    </testcase>
    <testcase classname="usuarios.db enableTwoFA debe activar 2FA para usuario" name="usuarios.db enableTwoFA debe activar 2FA para usuario" time="0.001">
    </testcase>
    <testcase classname="usuarios.db disableTwoFA debe desactivar 2FA para usuario" name="usuarios.db disableTwoFA debe desactivar 2FA para usuario" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="usuarios.controller - casos edge" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.218" tests="8">
    <testcase classname="usuarios.controller - casos edge obtenerUsuarios debe filtrar por rol" name="usuarios.controller - casos edge obtenerUsuarios debe filtrar por rol" time="0.004">
    </testcase>
    <testcase classname="usuarios.controller - casos edge obtenerUsuarios debe filtrar por búsqueda" name="usuarios.controller - casos edge obtenerUsuarios debe filtrar por búsqueda" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller - casos edge obtenerUsuarios debe filtrar por rol y búsqueda" name="usuarios.controller - casos edge obtenerUsuarios debe filtrar por rol y búsqueda" time="0.003">
    </testcase>
    <testcase classname="usuarios.controller - casos edge obtenerUsuarios debe manejar errores" name="usuarios.controller - casos edge obtenerUsuarios debe manejar errores" time="0.005">
    </testcase>
    <testcase classname="usuarios.controller - casos edge obtenerUsuarioActual debe obtener usuario actual exitosamente" name="usuarios.controller - casos edge obtenerUsuarioActual debe obtener usuario actual exitosamente" time="0.002">
    </testcase>
    <testcase classname="usuarios.controller - casos edge obtenerUsuarioActual debe retornar 401 si no está autenticado" name="usuarios.controller - casos edge obtenerUsuarioActual debe retornar 401 si no está autenticado" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller - casos edge obtenerUsuarioActual debe retornar 404 si el usuario no existe" name="usuarios.controller - casos edge obtenerUsuarioActual debe retornar 404 si el usuario no existe" time="0.001">
    </testcase>
    <testcase classname="usuarios.controller - casos edge obtenerUsuarioActual debe manejar errores" name="usuarios.controller - casos edge obtenerUsuarioActual debe manejar errores" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="libros.controller - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.225" tests="9">
    <testcase classname="libros.controller - cobertura completa handleControllerError debe manejar AppError con details" name="libros.controller - cobertura completa handleControllerError debe manejar AppError con details" time="0.002">
    </testcase>
    <testcase classname="libros.controller - cobertura completa handleControllerError debe manejar error 42P01 (tabla no encontrada)" name="libros.controller - cobertura completa handleControllerError debe manejar error 42P01 (tabla no encontrada)" time="0.002">
    </testcase>
    <testcase classname="libros.controller - cobertura completa handleControllerError debe manejar error 42703 (columna no encontrada)" name="libros.controller - cobertura completa handleControllerError debe manejar error 42703 (columna no encontrada)" time="0">
    </testcase>
    <testcase classname="libros.controller - cobertura completa obtenerLibros debe retornar resultado exitoso" name="libros.controller - cobertura completa obtenerLibros debe retornar resultado exitoso" time="0.001">
    </testcase>
    <testcase classname="libros.controller - cobertura completa obtenerLibroPorId debe retornar 404 si libro no existe" name="libros.controller - cobertura completa obtenerLibroPorId debe retornar 404 si libro no existe" time="0.001">
    </testcase>
    <testcase classname="libros.controller - cobertura completa subirImagenLibro debe retornar 400 si no hay archivo" name="libros.controller - cobertura completa subirImagenLibro debe retornar 400 si no hay archivo" time="0.001">
    </testcase>
    <testcase classname="libros.controller - cobertura completa subirImagenLibro debe actualizar imagen si hay archivo" name="libros.controller - cobertura completa subirImagenLibro debe actualizar imagen si hay archivo" time="0.001">
    </testcase>
    <testcase classname="libros.controller - cobertura completa obtenerRecomendaciones debe retornar recomendaciones exitosamente" name="libros.controller - cobertura completa obtenerRecomendaciones debe retornar recomendaciones exitosamente" time="0.001">
    </testcase>
    <testcase classname="libros.controller - cobertura completa obtenerRecomendaciones debe manejar errores del servicio" name="libros.controller - cobertura completa obtenerRecomendaciones debe manejar errores del servicio" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="register-error-handlers" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.223" tests="1">
    <testcase classname="register-error-handlers registerErrorHandlers debe registrar manejadores de error" name="register-error-handlers registerErrorHandlers debe registrar manejadores de error" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="QueryBuilder" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.216" tests="15">
    <testcase classname="QueryBuilder constructor debe inicializar con query base" name="QueryBuilder constructor debe inicializar con query base" time="0.007">
    </testcase>
    <testcase classname="QueryBuilder where debe agregar condición WHERE simple" name="QueryBuilder where debe agregar condición WHERE simple" time="0.001">
    </testcase>
    <testcase classname="QueryBuilder where debe ignorar valores null/undefined/vacíos" name="QueryBuilder where debe ignorar valores null/undefined/vacíos" time="0.001">
    </testcase>
    <testcase classname="QueryBuilder where debe soportar operador ILIKE" name="QueryBuilder where debe soportar operador ILIKE" time="0.001">
    </testcase>
    <testcase classname="QueryBuilder where debe soportar operador IN con array" name="QueryBuilder where debe soportar operador IN con array" time="0">
    </testcase>
    <testcase classname="QueryBuilder where debe ignorar array vacío en IN" name="QueryBuilder where debe ignorar array vacío en IN" time="0.001">
    </testcase>
    <testcase classname="QueryBuilder whereRaw debe agregar condición raw sin parámetros" name="QueryBuilder whereRaw debe agregar condición raw sin parámetros" time="0">
    </testcase>
    <testcase classname="QueryBuilder whereRaw debe reemplazar placeholders ? con parámetros numerados" name="QueryBuilder whereRaw debe reemplazar placeholders ? con parámetros numerados" time="0.001">
    </testcase>
    <testcase classname="QueryBuilder orderBy debe agregar ORDER BY" name="QueryBuilder orderBy debe agregar ORDER BY" time="0">
    </testcase>
    <testcase classname="QueryBuilder orderBy debe usar ASC por defecto" name="QueryBuilder orderBy debe usar ASC por defecto" time="0">
    </testcase>
    <testcase classname="QueryBuilder paginate debe establecer limit y offset" name="QueryBuilder paginate debe establecer limit y offset" time="0.001">
    </testcase>
    <testcase classname="QueryBuilder paginate debe validar limit mínimo" name="QueryBuilder paginate debe validar limit mínimo" time="0">
    </testcase>
    <testcase classname="QueryBuilder paginate debe validar offset mínimo" name="QueryBuilder paginate debe validar offset mínimo" time="0">
    </testcase>
    <testcase classname="QueryBuilder build debe construir query completa" name="QueryBuilder build debe construir query completa" time="0.001">
    </testcase>
    <testcase classname="QueryBuilder build debe construir query sin WHERE si no hay condiciones" name="QueryBuilder build debe construir query sin WHERE si no hay condiciones" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="libros.controller - casos adicionales" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.203" tests="5">
    <testcase classname="libros.controller - casos adicionales handleControllerError - casos edge debe manejar AppError con details" name="libros.controller - casos adicionales handleControllerError - casos edge debe manejar AppError con details" time="0.003">
    </testcase>
    <testcase classname="libros.controller - casos adicionales handleControllerError - casos edge debe manejar error genérico en obtenerLibroPorId" name="libros.controller - casos adicionales handleControllerError - casos edge debe manejar error genérico en obtenerLibroPorId" time="0.001">
    </testcase>
    <testcase classname="libros.controller - casos adicionales handleControllerError - casos edge debe manejar error 42P01 en crearLibro" name="libros.controller - casos adicionales handleControllerError - casos edge debe manejar error 42P01 en crearLibro" time="0.002">
    </testcase>
    <testcase classname="libros.controller - casos adicionales handleControllerError - casos edge debe manejar error 42703 en actualizarLibro" name="libros.controller - casos adicionales handleControllerError - casos edge debe manejar error 42703 en actualizarLibro" time="0.002">
    </testcase>
    <testcase classname="libros.controller - casos adicionales handleControllerError - casos edge debe manejar error genérico en eliminarLibro" name="libros.controller - casos adicionales handleControllerError - casos edge debe manejar error genérico en eliminarLibro" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="supadmin.controller - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.233" tests="6">
    <testcase classname="supadmin.controller - cobertura completa obtenerEstadisticasGlobales - casos edge debe procesar datos vacíos correctamente" name="supadmin.controller - cobertura completa obtenerEstadisticasGlobales - casos edge debe procesar datos vacíos correctamente" time="0.003">
    </testcase>
    <testcase classname="supadmin.controller - cobertura completa obtenerEstadisticasGlobales - casos edge debe manejar error en consultas" name="supadmin.controller - cobertura completa obtenerEstadisticasGlobales - casos edge debe manejar error en consultas" time="0.003">
    </testcase>
    <testcase classname="supadmin.controller - cobertura completa obtenerEstadisticasGlobales - casos edge debe procesar categorías null como &quot;Sin categoría&quot;" name="supadmin.controller - cobertura completa obtenerEstadisticasGlobales - casos edge debe procesar categorías null como &quot;Sin categoría&quot;" time="0.001">
    </testcase>
    <testcase classname="supadmin.controller - cobertura completa obtenerActividadReciente - casos edge debe filtrar por tipo si se proporciona" name="supadmin.controller - cobertura completa obtenerActividadReciente - casos edge debe filtrar por tipo si se proporciona" time="0.002">
    </testcase>
    <testcase classname="supadmin.controller - cobertura completa obtenerActividadReciente - casos edge debe manejar error de base de datos" name="supadmin.controller - cobertura completa obtenerActividadReciente - casos edge debe manejar error de base de datos" time="0.001">
    </testcase>
    <testcase classname="supadmin.controller - cobertura completa obtenerLogs - casos edge debe manejar error en processApplicationLogs" name="supadmin.controller - cobertura completa obtenerLogs - casos edge debe manejar error en processApplicationLogs" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="register-error-handlers - cobertura completa" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:42" time="0.248" tests="7">
    <testcase classname="register-error-handlers - cobertura completa debe registrar middleware de errores" name="register-error-handlers - cobertura completa debe registrar middleware de errores" time="0.004">
    </testcase>
    <testcase classname="register-error-handlers - cobertura completa Error handler middleware debe manejar SyntaxError de JSON" name="register-error-handlers - cobertura completa Error handler middleware debe manejar SyntaxError de JSON" time="0.002">
    </testcase>
    <testcase classname="register-error-handlers - cobertura completa Error handler middleware debe manejar error 23505 (unique constraint)" name="register-error-handlers - cobertura completa Error handler middleware debe manejar error 23505 (unique constraint)" time="0.005">
    </testcase>
    <testcase classname="register-error-handlers - cobertura completa Error handler middleware debe manejar error 23503 (foreign key)" name="register-error-handlers - cobertura completa Error handler middleware debe manejar error 23503 (foreign key)" time="0.001">
    </testcase>
    <testcase classname="register-error-handlers - cobertura completa Error handler middleware debe manejar error genérico" name="register-error-handlers - cobertura completa Error handler middleware debe manejar error genérico" time="0.001">
    </testcase>
    <testcase classname="register-error-handlers - cobertura completa Error handler middleware debe llamar next si headers ya fueron enviados" name="register-error-handlers - cobertura completa Error handler middleware debe llamar next si headers ya fueron enviados" time="0">
    </testcase>
    <testcase classname="register-error-handlers - cobertura completa 404 handler middleware debe retornar 404 para rutas no encontradas" name="register-error-handlers - cobertura completa 404 handler middleware debe retornar 404 para rutas no encontradas" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="contacto.services.js" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:52" time="4.858" tests="4">
    <testcase classname="contacto.services.js initContactoForm debe inicializar formulario de contacto" name="contacto.services.js initContactoForm debe inicializar formulario de contacto" time="0.14">
    </testcase>
    <testcase classname="contacto.services.js initContactoForm debe mostrar warning si formulario no existe" name="contacto.services.js initContactoForm debe mostrar warning si formulario no existe" time="0.024">
    </testcase>
    <testcase classname="contacto.services.js simularEnvioContacto debe simular envío de contacto" name="contacto.services.js simularEnvioContacto debe simular envío de contacto" time="0.037">
    </testcase>
    <testcase classname="contacto.services.js simularEnvioContacto debe retornar una promesa que se resuelve después del delay" name="contacto.services.js simularEnvioContacto debe retornar una promesa que se resuelve después del delay" time="0.02">
    </testcase>
  </testsuite>
  <testsuite name="component-loader.services.js" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:52" time="5.132" tests="12">
    <testcase classname="component-loader.services.js loadComponent debe cargar componente desde el servidor" name="component-loader.services.js loadComponent debe cargar componente desde el servidor" time="0.019">
    </testcase>
    <testcase classname="component-loader.services.js loadComponent debe usar cache en segunda llamada" name="component-loader.services.js loadComponent debe usar cache en segunda llamada" time="0.003">
    </testcase>
    <testcase classname="component-loader.services.js loadComponent debe retornar string vacío en caso de error" name="component-loader.services.js loadComponent debe retornar string vacío en caso de error" time="0.01">
    </testcase>
    <testcase classname="component-loader.services.js loadComponent debe manejar error HTTP" name="component-loader.services.js loadComponent debe manejar error HTTP" time="0.002">
    </testcase>
    <testcase classname="component-loader.services.js loadIntoElement debe cargar componente en elemento" name="component-loader.services.js loadIntoElement debe cargar componente en elemento" time="0.173">
    </testcase>
    <testcase classname="component-loader.services.js loadIntoElement debe ejecutar callback onLoad si se proporciona" name="component-loader.services.js loadIntoElement debe ejecutar callback onLoad si se proporciona" time="0.021">
    </testcase>
    <testcase classname="component-loader.services.js loadIntoElement debe mostrar warning si elemento no existe" name="component-loader.services.js loadIntoElement debe mostrar warning si elemento no existe" time="0.005">
    </testcase>
    <testcase classname="component-loader.services.js loadComponents debe cargar múltiples componentes" name="component-loader.services.js loadComponents debe cargar múltiples componentes" time="0.041">
    </testcase>
    <testcase classname="component-loader.services.js clearCache debe limpiar el cache" name="component-loader.services.js clearCache debe limpiar el cache" time="0.01">
    </testcase>
    <testcase classname="component-loader.services.js loadGuestHeader debe cargar header de invitado" name="component-loader.services.js loadGuestHeader debe cargar header de invitado" time="0.06">
    </testcase>
    <testcase classname="component-loader.services.js loadGuestFooter debe cargar footer de invitado" name="component-loader.services.js loadGuestFooter debe cargar footer de invitado" time="0.017">
    </testcase>
    <testcase classname="component-loader.services.js loadGuestLayout debe cargar layout completo de invitado" name="component-loader.services.js loadGuestLayout debe cargar layout completo de invitado" time="0.047">
    </testcase>
  </testsuite>
  <testsuite name="api-client.js" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:52" time="5.086" tests="12">
    <testcase classname="api-client.js getAuthHeaders debe retornar headers con token" name="api-client.js getAuthHeaders debe retornar headers con token" time="0.017">
    </testcase>
    <testcase classname="api-client.js getAuthHeaders debe retornar solo Content-Type si no hay token y includeContentType es true" name="api-client.js getAuthHeaders debe retornar solo Content-Type si no hay token y includeContentType es true" time="0.005">
    </testcase>
    <testcase classname="api-client.js getAuthHeaders debe retornar objeto vacío si no hay token y includeContentType es false" name="api-client.js getAuthHeaders debe retornar objeto vacío si no hay token y includeContentType es false" time="0.001">
    </testcase>
    <testcase classname="api-client.js getAuthHeaders debe retornar headers sin Content-Type si includeContentType es false" name="api-client.js getAuthHeaders debe retornar headers sin Content-Type si includeContentType es false" time="0.001">
    </testcase>
    <testcase classname="api-client.js handleApiError debe manejar error 401 limpiando storage y redirigiendo" name="api-client.js handleApiError debe manejar error 401 limpiando storage y redirigiendo" time="0.34">
    </testcase>
    <testcase classname="api-client.js handleApiError debe manejar otros errores HTTP" name="api-client.js handleApiError debe manejar otros errores HTTP" time="0.001">
    </testcase>
    <testcase classname="api-client.js get debe hacer petición GET exitosa" name="api-client.js get debe hacer petición GET exitosa" time="0.012">
    </testcase>
    <testcase classname="api-client.js post debe hacer petición POST exitosa" name="api-client.js post debe hacer petición POST exitosa" time="0.011">
    </testcase>
    <testcase classname="api-client.js put debe hacer petición PUT exitosa" name="api-client.js put debe hacer petición PUT exitosa" time="0.002">
    </testcase>
    <testcase classname="api-client.js delete debe hacer petición DELETE exitosa" name="api-client.js delete debe hacer petición DELETE exitosa" time="0.008">
    </testcase>
    <testcase classname="api-client.js fetchWithAuth debe hacer petición con autenticación" name="api-client.js fetchWithAuth debe hacer petición con autenticación" time="0.01">
    </testcase>
    <testcase classname="api-client.js fetchWithAuth debe serializar body automáticamente si es objeto" name="api-client.js fetchWithAuth debe serializar body automáticamente si es objeto" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="bibliotecas.services.js" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:52" time="5.617" tests="12">
    <testcase classname="bibliotecas.services.js initBibliotecasPage debe inicializar página de bibliotecas (admin)" name="bibliotecas.services.js initBibliotecasPage debe inicializar página de bibliotecas (admin)" time="0.168">
    </testcase>
    <testcase classname="bibliotecas.services.js initBibliotecasGuestPage debe inicializar página de bibliotecas (invitado)" name="bibliotecas.services.js initBibliotecasGuestPage debe inicializar página de bibliotecas (invitado)" time="0.029">
    </testcase>
    <testcase classname="bibliotecas.services.js cargaBibliotecas debe cargar bibliotecas exitosamente (admin)" name="bibliotecas.services.js cargaBibliotecas debe cargar bibliotecas exitosamente (admin)" time="0.147">
    </testcase>
    <testcase classname="bibliotecas.services.js cargaBibliotecas debe cargar bibliotecas exitosamente (invitado)" name="bibliotecas.services.js cargaBibliotecas debe cargar bibliotecas exitosamente (invitado)" time="0.076">
    </testcase>
    <testcase classname="bibliotecas.services.js cargaBibliotecas debe manejar error 500 del servidor" name="bibliotecas.services.js cargaBibliotecas debe manejar error 500 del servidor" time="0.03">
    </testcase>
    <testcase classname="bibliotecas.services.js cargaBibliotecas debe manejar error de red" name="bibliotecas.services.js cargaBibliotecas debe manejar error de red" time="0.021">
    </testcase>
    <testcase classname="bibliotecas.services.js cargaBibliotecas debe mostrar mensaje si no hay bibliotecas" name="bibliotecas.services.js cargaBibliotecas debe mostrar mensaje si no hay bibliotecas" time="0.006">
    </testcase>
    <testcase classname="bibliotecas.services.js cargaBibliotecas debe manejar diferentes formatos de respuesta" name="bibliotecas.services.js cargaBibliotecas debe manejar diferentes formatos de respuesta" time="0.1">
    </testcase>
    <testcase classname="bibliotecas.services.js cargaBibliotecas debe mostrar warning si el elemento no existe" name="bibliotecas.services.js cargaBibliotecas debe mostrar warning si el elemento no existe" time="0.006">
    </testcase>
    <testcase classname="bibliotecas.services.js cargaBibliotecas debe normalizar payload con bibliotecas.bibliotecas" name="bibliotecas.services.js cargaBibliotecas debe normalizar payload con bibliotecas.bibliotecas" time="0.086">
    </testcase>
    <testcase classname="bibliotecas.services.js mostrarLoginRequerido debe mostrar mensaje de login requerido" name="bibliotecas.services.js mostrarLoginRequerido debe mostrar mensaje de login requerido" time="0.096">
    </testcase>
    <testcase classname="bibliotecas.services.js mostrarLoginRequerido debe manejar cuando no hay elemento main" name="bibliotecas.services.js mostrarLoginRequerido debe manejar cuando no hay elemento main" time="0.041">
    </testcase>
  </testsuite>
  <testsuite name="form-handler.js" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:52" time="5.538" tests="18">
    <testcase classname="form-handler.js setupSubmitButton debe configurar botón con estado de carga" name="form-handler.js setupSubmitButton debe configurar botón con estado de carga" time="0.125">
    </testcase>
    <testcase classname="form-handler.js setupSubmitButton debe retornar función no-op si el botón no existe" name="form-handler.js setupSubmitButton debe retornar función no-op si el botón no existe" time="0.012">
    </testcase>
    <testcase classname="form-handler.js getFormData debe extraer datos de formulario con campos específicos" name="form-handler.js getFormData debe extraer datos de formulario con campos específicos" time="0.137">
    </testcase>
    <testcase classname="form-handler.js getFormData debe extraer todos los datos del formulario si no se especifican campos" name="form-handler.js getFormData debe extraer todos los datos del formulario si no se especifican campos" time="0.044">
    </testcase>
    <testcase classname="form-handler.js getFormData debe retornar objeto vacío si el formulario no existe" name="form-handler.js getFormData debe retornar objeto vacío si el formulario no existe" time="0.013">
    </testcase>
    <testcase classname="form-handler.js getFormData debe manejar checkboxes" name="form-handler.js getFormData debe manejar checkboxes" time="0.029">
    </testcase>
    <testcase classname="form-handler.js getFormData debe manejar radio buttons" name="form-handler.js getFormData debe manejar radio buttons" time="0.032">
    </testcase>
    <testcase classname="form-handler.js isValidEmail debe validar email correcto" name="form-handler.js isValidEmail debe validar email correcto" time="0.009">
    </testcase>
    <testcase classname="form-handler.js isValidEmail debe rechazar email inválido" name="form-handler.js isValidEmail debe rechazar email inválido" time="0.007">
    </testcase>
    <testcase classname="form-handler.js isValidEmail debe rechazar email muy largo" name="form-handler.js isValidEmail debe rechazar email muy largo" time="0.013">
    </testcase>
    <testcase classname="form-handler.js isValidEmail debe rechazar valores no string" name="form-handler.js isValidEmail debe rechazar valores no string" time="0.009">
    </testcase>
    <testcase classname="form-handler.js validateRequired debe validar campo requerido con valor" name="form-handler.js validateRequired debe validar campo requerido con valor" time="0.007">
    </testcase>
    <testcase classname="form-handler.js validateRequired debe retornar error si el campo está vacío" name="form-handler.js validateRequired debe retornar error si el campo está vacío" time="0.005">
    </testcase>
    <testcase classname="form-handler.js validateRequired debe retornar error si el campo es null o undefined" name="form-handler.js validateRequired debe retornar error si el campo es null o undefined" time="0.008">
    </testcase>
    <testcase classname="form-handler.js showError debe mostrar error en el formulario" name="form-handler.js showError debe mostrar error en el formulario" time="0.059">
    </testcase>
    <testcase classname="form-handler.js showSuccess debe mostrar mensaje de éxito en el formulario" name="form-handler.js showSuccess debe mostrar mensaje de éxito en el formulario" time="0.06">
    </testcase>
    <testcase classname="form-handler.js handleFormSubmit debe manejar envío de formulario exitoso" name="form-handler.js handleFormSubmit debe manejar envío de formulario exitoso" time="0.067">
    </testcase>
    <testcase classname="form-handler.js handleFormSubmit debe manejar errores en el envío" name="form-handler.js handleFormSubmit debe manejar errores en el envío" time="0.068">
    </testcase>
  </testsuite>
  <testsuite name="libros.services.js - Frontend" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:52" time="6.782" tests="26">
    <testcase classname="libros.services.js - Frontend authHeaders debe retornar headers con token de localStorage" name="libros.services.js - Frontend authHeaders debe retornar headers con token de localStorage" time="0.049">
    </testcase>
    <testcase classname="libros.services.js - Frontend authHeaders debe retornar headers con token de sessionStorage si no hay en localStorage" name="libros.services.js - Frontend authHeaders debe retornar headers con token de sessionStorage si no hay en localStorage" time="0.031">
    </testcase>
    <testcase classname="libros.services.js - Frontend authHeaders debe retornar objeto vacío si no hay token" name="libros.services.js - Frontend authHeaders debe retornar objeto vacío si no hay token" time="0.055">
    </testcase>
    <testcase classname="libros.services.js - Frontend authHeaders debe agregar Content-Type para métodos POST, PUT, PATCH, DELETE" name="libros.services.js - Frontend authHeaders debe agregar Content-Type para métodos POST, PUT, PATCH, DELETE" time="0.019">
    </testcase>
    <testcase classname="libros.services.js - Frontend authHeaders no debe agregar Content-Type para GET" name="libros.services.js - Frontend authHeaders no debe agregar Content-Type para GET" time="0.02">
    </testcase>
    <testcase classname="libros.services.js - Frontend debugAuth debe retornar token y role de localStorage" name="libros.services.js - Frontend debugAuth debe retornar token y role de localStorage" time="0.013">
    </testcase>
    <testcase classname="libros.services.js - Frontend debugAuth debe retornar token y role de sessionStorage si no hay en localStorage" name="libros.services.js - Frontend debugAuth debe retornar token y role de sessionStorage si no hay en localStorage" time="0.013">
    </testcase>
    <testcase classname="libros.services.js - Frontend debugAuth debe retornar null si no hay token ni role" name="libros.services.js - Frontend debugAuth debe retornar null si no hay token ni role" time="0.007">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarLibros debe mostrar spinner mientras carga" name="libros.services.js - Frontend cargarLibros debe mostrar spinner mientras carga" time="0.215">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarLibros debe cargar libros exitosamente" name="libros.services.js - Frontend cargarLibros debe cargar libros exitosamente" time="0.205">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarLibros debe manejar error 401 mostrando mensaje de sesión expirada" name="libros.services.js - Frontend cargarLibros debe manejar error 401 mostrando mensaje de sesión expirada" time="0.055">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarLibros debe manejar error 403 mostrando mensaje de sesión expirada" name="libros.services.js - Frontend cargarLibros debe manejar error 403 mostrando mensaje de sesión expirada" time="0.029">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarLibros debe manejar errores de red" name="libros.services.js - Frontend cargarLibros debe manejar errores de red" time="0.03">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarLibros debe usar filtros en la URL" name="libros.services.js - Frontend cargarLibros debe usar filtros en la URL" time="0.027">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarBibliotecas debe cargar bibliotecas en el selector" name="libros.services.js - Frontend cargarBibliotecas debe cargar bibliotecas en el selector" time="0.071">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarBibliotecas debe manejar error al cargar bibliotecas" name="libros.services.js - Frontend cargarBibliotecas debe manejar error al cargar bibliotecas" time="0.016">
    </testcase>
    <testcase classname="libros.services.js - Frontend cargarBibliotecas debe manejar respuesta sin bibliotecas" name="libros.services.js - Frontend cargarBibliotecas debe manejar respuesta sin bibliotecas" time="0.012">
    </testcase>
    <testcase classname="libros.services.js - Frontend aplicarFiltros debe aplicar filtros y recargar libros" name="libros.services.js - Frontend aplicarFiltros debe aplicar filtros y recargar libros" time="0.033">
    </testcase>
    <testcase classname="libros.services.js - Frontend verDetalleLibro debe cargar detalles del libro y mostrar modal" name="libros.services.js - Frontend verDetalleLibro debe cargar detalles del libro y mostrar modal" time="0.023">
    </testcase>
    <testcase classname="libros.services.js - Frontend verDetalleLibro debe manejar error al cargar detalles" name="libros.services.js - Frontend verDetalleLibro debe manejar error al cargar detalles" time="0.018">
    </testcase>
    <testcase classname="libros.services.js - Frontend ordenarLibros debe ordenar libros por criterio y recargar" name="libros.services.js - Frontend ordenarLibros debe ordenar libros por criterio y recargar" time="0.029">
    </testcase>
    <testcase classname="libros.services.js - Frontend ordenarLibros debe usar popularidad por defecto si no se especifica criterio" name="libros.services.js - Frontend ordenarLibros debe usar popularidad por defecto si no se especifica criterio" time="0.025">
    </testcase>
    <testcase classname="libros.services.js - Frontend cambiarVista debe cambiar a vista de lista" name="libros.services.js - Frontend cambiarVista debe cambiar a vista de lista" time="0.013">
    </testcase>
    <testcase classname="libros.services.js - Frontend cambiarVista debe cambiar a vista de grid" name="libros.services.js - Frontend cambiarVista debe cambiar a vista de grid" time="0.016">
    </testcase>
    <testcase classname="libros.services.js - Frontend limpiarFiltros debe limpiar filtros y recargar libros" name="libros.services.js - Frontend limpiarFiltros debe limpiar filtros y recargar libros" time="0.057">
    </testcase>
    <testcase classname="libros.services.js - Frontend initLibrosPage debe inicializar la página de libros" name="libros.services.js - Frontend initLibrosPage debe inicializar la página de libros" time="0.098">
    </testcase>
  </testsuite>
  <testsuite name="auth.services.js" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:54" time="4.166" tests="38">
    <testcase classname="auth.services.js getToken debe retornar token de localStorage" name="auth.services.js getToken debe retornar token de localStorage" time="0.025">
    </testcase>
    <testcase classname="auth.services.js getToken debe retornar token de sessionStorage si no hay en localStorage" name="auth.services.js getToken debe retornar token de sessionStorage si no hay en localStorage" time="0.006">
    </testcase>
    <testcase classname="auth.services.js getToken debe retornar null si no hay token" name="auth.services.js getToken debe retornar null si no hay token" time="0.004">
    </testcase>
    <testcase classname="auth.services.js getRole debe retornar role de localStorage" name="auth.services.js getRole debe retornar role de localStorage" time="0.003">
    </testcase>
    <testcase classname="auth.services.js getRole debe retornar role de sessionStorage si no hay en localStorage" name="auth.services.js getRole debe retornar role de sessionStorage si no hay en localStorage" time="0.002">
    </testcase>
    <testcase classname="auth.services.js getUserId debe retornar userId de localStorage" name="auth.services.js getUserId debe retornar userId de localStorage" time="0.002">
    </testcase>
    <testcase classname="auth.services.js getUserName debe retornar userName de localStorage" name="auth.services.js getUserName debe retornar userName de localStorage" time="0.004">
    </testcase>
    <testcase classname="auth.services.js isAuthenticated debe retornar true si hay token" name="auth.services.js isAuthenticated debe retornar true si hay token" time="0.019">
    </testcase>
    <testcase classname="auth.services.js isAuthenticated debe retornar false si no hay token" name="auth.services.js isAuthenticated debe retornar false si no hay token" time="0.004">
    </testcase>
    <testcase classname="auth.services.js hasRole debe retornar true si el usuario tiene el rol especificado" name="auth.services.js hasRole debe retornar true si el usuario tiene el rol especificado" time="0.004">
    </testcase>
    <testcase classname="auth.services.js hasRole debe retornar true si el usuario es admin (tiene acceso a todo)" name="auth.services.js hasRole debe retornar true si el usuario es admin (tiene acceso a todo)" time="0.014">
    </testcase>
    <testcase classname="auth.services.js hasRole debe retornar false si el usuario no tiene el rol" name="auth.services.js hasRole debe retornar false si el usuario no tiene el rol" time="0.001">
    </testcase>
    <testcase classname="auth.services.js isAdmin debe retornar true si el usuario es admin" name="auth.services.js isAdmin debe retornar true si el usuario es admin" time="0.001">
    </testcase>
    <testcase classname="auth.services.js isAdmin debe retornar false si el usuario no es admin" name="auth.services.js isAdmin debe retornar false si el usuario no es admin" time="0.002">
    </testcase>
    <testcase classname="auth.services.js logout debe limpiar todos los datos de autenticación" name="auth.services.js logout debe limpiar todos los datos de autenticación" time="0.153">
    </testcase>
    <testcase classname="auth.services.js getRuntime debe retornar globalThis si está disponible" name="auth.services.js getRuntime debe retornar globalThis si está disponible" time="0.012">
    </testcase>
    <testcase classname="auth.services.js getAuthHeaders debe retornar headers con token" name="auth.services.js getAuthHeaders debe retornar headers con token" time="0.033">
    </testcase>
    <testcase classname="auth.services.js getAuthHeaders debe retornar objeto vacío si no hay token" name="auth.services.js getAuthHeaders debe retornar objeto vacío si no hay token" time="0.017">
    </testcase>
    <testcase classname="auth.services.js isSupAdmin debe retornar true si el usuario es supadmin" name="auth.services.js isSupAdmin debe retornar true si el usuario es supadmin" time="0.004">
    </testcase>
    <testcase classname="auth.services.js isSupAdmin debe retornar false si el usuario no es supadmin" name="auth.services.js isSupAdmin debe retornar false si el usuario no es supadmin" time="0.003">
    </testcase>
    <testcase classname="auth.services.js login debe hacer login exitosamente" name="auth.services.js login debe hacer login exitosamente" time="0.022">
    </testcase>
    <testcase classname="auth.services.js login debe manejar error en login" name="auth.services.js login debe manejar error en login" time="0.002">
    </testcase>
    <testcase classname="auth.services.js register debe registrar usuario exitosamente" name="auth.services.js register debe registrar usuario exitosamente" time="0.03">
    </testcase>
    <testcase classname="auth.services.js saveSession debe guardar sesión en localStorage si remember es true" name="auth.services.js saveSession debe guardar sesión en localStorage si remember es true" time="0.01">
    </testcase>
    <testcase classname="auth.services.js saveSession debe guardar sesión en sessionStorage si remember es false" name="auth.services.js saveSession debe guardar sesión en sessionStorage si remember es false" time="0.012">
    </testcase>
    <testcase classname="auth.services.js debugAuth debe retornar información de autenticación" name="auth.services.js debugAuth debe retornar información de autenticación" time="0.07">
    </testcase>
    <testcase classname="auth.services.js refreshToken debe refrescar token exitosamente" name="auth.services.js refreshToken debe refrescar token exitosamente" time="0.012">
    </testcase>
    <testcase classname="auth.services.js refreshToken debe manejar error al refrescar token" name="auth.services.js refreshToken debe manejar error al refrescar token" time="0.054">
    </testcase>
    <testcase classname="auth.services.js refreshToken debe retornar false si no hay token" name="auth.services.js refreshToken debe retornar false si no hay token" time="0.048">
    </testcase>
    <testcase classname="auth.services.js getCurrentUser debe obtener usuario actual exitosamente" name="auth.services.js getCurrentUser debe obtener usuario actual exitosamente" time="0.005">
    </testcase>
    <testcase classname="auth.services.js getCurrentUser debe intentar refrescar token si recibe 401" name="auth.services.js getCurrentUser debe intentar refrescar token si recibe 401" time="0.005">
    </testcase>
    <testcase classname="auth.services.js getCurrentUser debe retornar null en caso de error" name="auth.services.js getCurrentUser debe retornar null en caso de error" time="0.006">
    </testcase>
    <testcase classname="auth.services.js isTokenExpired debe retornar true si no hay token" name="auth.services.js isTokenExpired debe retornar true si no hay token" time="0.006">
    </testcase>
    <testcase classname="auth.services.js isTokenExpired debe retornar true si el token está expirado" name="auth.services.js isTokenExpired debe retornar true si el token está expirado" time="0.016">
    </testcase>
    <testcase classname="auth.services.js isTokenExpired debe retornar false si el token no está expirado" name="auth.services.js isTokenExpired debe retornar false si el token no está expirado" time="0.01">
    </testcase>
    <testcase classname="auth.services.js isTokenExpired debe retornar true si el token es inválido" name="auth.services.js isTokenExpired debe retornar true si el token es inválido" time="0.006">
    </testcase>
    <testcase classname="auth.services.js ensureValidToken debe refrescar token si está expirado" name="auth.services.js ensureValidToken debe refrescar token si está expirado" time="0.003">
    </testcase>
    <testcase classname="auth.services.js ensureValidToken debe retornar true si el token es válido" name="auth.services.js ensureValidToken debe retornar true si el token es válido" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="admin-functions.js - Tests SonarQube Compliant" errors="0" failures="0" skipped="0" timestamp="2025-11-13T19:41:58" time="4.236" tests="37">
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarLoading debe mostrar el spinner cuando mostrar=true" name="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarLoading debe mostrar el spinner cuando mostrar=true" time="0.298">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarLoading debe ocultar el spinner cuando mostrar=false" name="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarLoading debe ocultar el spinner cuando mostrar=false" time="0.051">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarLoading debe manejar spinner inexistente sin errores" name="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarLoading debe manejar spinner inexistente sin errores" time="0.098">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarError debe mostrar mensaje de error" name="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarError debe mostrar mensaje de error" time="0.042">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarError debe manejar elementos DOM inexistentes" name="admin-functions.js - Tests SonarQube Compliant Funciones de Utilidad mostrarError debe manejar elementos DOM inexistentes" time="0.025">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cargarLibros debe cargar libros exitosamente y actualizar paginación" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cargarLibros debe cargar libros exitosamente y actualizar paginación" time="0.217">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cargarLibros debe aplicar filtros correctamente" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cargarLibros debe aplicar filtros correctamente" time="0.036">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cargarLibros debe manejar error y llamar mostrarError" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cargarLibros debe manejar error y llamar mostrarError" time="0.046">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cargarLibros debe manejar lista vacía de libros" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cargarLibros debe manejar lista vacía de libros" time="0.089">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros mostrarTablaLibros debe renderizar tabla con datos correctos" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros mostrarTablaLibros debe renderizar tabla con datos correctos" time="0.125">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros mostrarTablaLibros debe usar placeholder cuando no hay imagen" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros mostrarTablaLibros debe usar placeholder cuando no hay imagen" time="0.052">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros mostrarPaginacionLibros debe manejar solo una página" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros mostrarPaginacionLibros debe manejar solo una página" time="0.084">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cambiarPaginaLibros debe ignorar página inválida (menor a 1)" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cambiarPaginaLibros debe ignorar página inválida (menor a 1)" time="0.04">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cambiarPaginaLibros debe ignorar página inválida (mayor al total)" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros cambiarPaginaLibros debe ignorar página inválida (mayor al total)" time="0.087">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Libros filtrarLibros debe recolectar filtros y llamar cargarLibros" name="admin-functions.js - Tests SonarQube Compliant Gestión de Libros filtrarLibros debe recolectar filtros y llamar cargarLibros" time="0.106">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos cargarPrestamos debe cargar préstamos exitosamente" name="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos cargarPrestamos debe cargar préstamos exitosamente" time="0.073">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos cargarPrestamos debe manejar error al cargar préstamos" name="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos cargarPrestamos debe manejar error al cargar préstamos" time="0.028">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos mostrarTablaPrestamos debe renderizar préstamos con estado correcto" name="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos mostrarTablaPrestamos debe renderizar préstamos con estado correcto" time="0.067">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos mostrarTablaPrestamos debe mostrar &quot;Devuelto&quot; para préstamos finalizados" name="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos mostrarTablaPrestamos debe mostrar &quot;Devuelto&quot; para préstamos finalizados" time="0.063">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos marcarDevuelto debe marcar préstamo como devuelto exitosamente" name="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos marcarDevuelto debe marcar préstamo como devuelto exitosamente" time="0.026">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos marcarDevuelto debe manejar error al marcar como devuelto" name="admin-functions.js - Tests SonarQube Compliant Gestión de Préstamos marcarDevuelto debe manejar error al marcar como devuelto" time="0.042">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Estadísticas cargarEstadisticas debe cargar estadísticas y crear gráfico" name="admin-functions.js - Tests SonarQube Compliant Estadísticas cargarEstadisticas debe cargar estadísticas y crear gráfico" time="0.793">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Estadísticas cargarEstadisticas debe manejar error al cargar estadísticas" name="admin-functions.js - Tests SonarQube Compliant Estadísticas cargarEstadisticas debe manejar error al cargar estadísticas" time="0.022">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Estadísticas mostrarLibrosPopulares debe mostrar lista de libros populares" name="admin-functions.js - Tests SonarQube Compliant Estadísticas mostrarLibrosPopulares debe mostrar lista de libros populares" time="0.031">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Estadísticas mostrarLibrosPopulares debe mostrar mensaje cuando no hay datos" name="admin-functions.js - Tests SonarQube Compliant Estadísticas mostrarLibrosPopulares debe mostrar mensaje cuando no hay datos" time="0.035">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Información de Biblioteca debe cargar y mostrar información de biblioteca" name="admin-functions.js - Tests SonarQube Compliant Información de Biblioteca debe cargar y mostrar información de biblioteca" time="0.027">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Información de Biblioteca debe manejar dirección nula" name="admin-functions.js - Tests SonarQube Compliant Información de Biblioteca debe manejar dirección nula" time="0.016">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros buscarLibrosParaAgregar debe buscar libros con query válido" name="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros buscarLibrosParaAgregar debe buscar libros con query válido" time="0.018">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros buscarLibrosParaAgregar debe limpiar resultados cuando query &lt; 2 caracteres" name="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros buscarLibrosParaAgregar debe limpiar resultados cuando query &lt; 2 caracteres" time="0.018">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros buscarLibrosParaAgregar debe manejar error en búsqueda" name="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros buscarLibrosParaAgregar debe manejar error en búsqueda" time="0.01">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros agregarLibroABiblioteca debe manejar error al agregar libro" name="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros agregarLibroABiblioteca debe manejar error al agregar libro" time="0.015">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros removerLibroDeBiblioteca debe manejar error al remover libro" name="admin-functions.js - Tests SonarQube Compliant Agregar/Remover Libros removerLibroDeBiblioteca debe manejar error al remover libro" time="0.013">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales actualizarLibro debe mostrar alerta de funcionalidad pendiente" name="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales actualizarLibro debe mostrar alerta de funcionalidad pendiente" time="0.023">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales crearPrestamo debe mostrar alerta de funcionalidad pendiente" name="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales crearPrestamo debe mostrar alerta de funcionalidad pendiente" time="0.021">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales buscarUsuarios debe retornar array vacío y mostrar log" name="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales buscarUsuarios debe retornar array vacío y mostrar log" time="0.025">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales exportarEstadisticas debe crear y descargar archivo JSON con estadísticas" name="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales exportarEstadisticas debe crear y descargar archivo JSON con estadísticas" time="0.026">
    </testcase>
    <testcase classname="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales cargarCategorias debe manejar error al cargar categorías" name="admin-functions.js - Tests SonarQube Compliant Funciones Adicionales cargarCategorias debe manejar error al cargar categorías" time="0.008">
    </testcase>
  </testsuite>
</testsuites>